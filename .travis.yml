language: generic
dist: trusty
sudo: false
group: beta

cache:
  directories:
  - $HOME/.quark/cache
  - $HOME/.quark/wheel-cache
  - target/javascript/node_modules
  - target/java/deps
  - target/python/.tox

install:
- gem install test-unit
- pip install --upgrade pip setuptools wheel
- scripts/prepare-common.sh
- pip install --no-index --find-links=~/.quark/wheel-cache .

env:
 - TEST_SUITE=basic
 - TEST_SUITE=data1
 - TEST_SUITE=data2
 - TEST_SUITE=data3
 - TEST_SUITE=data4
 - TEST_SUITE=data5
 - TEST_SUITE=data6
 - TEST_SUITE=data7
 - TEST_SUITE=data8
 - TEST_SUITE=data9
 - TEST_SUITE=data10
 - TEST_SUITE=data11
 - TEST_SUITE=data12
 - TEST_SUITE=data13
 - TEST_SUITE=data14
 - TEST_SUITE=data15
 - TEST_SUITE=data16
 - TEST_SUITE=data17
 - TEST_SUITE=data18
 - TEST_SUITE=data19
 - TEST_SUITE=data20
 - TEST_SUITE=data21
 - TEST_SUITE=data22
 - TEST_SUITE=data23
 - TEST_SUITE=data24
 - TEST_SUITE=data25
 - TEST_SUITE=data26
 - TEST_SUITE=data27
 - TEST_SUITE=data28
 - TEST_SUITE=data29
 - TEST_SUITE=data30
 - TEST_SUITE=data31
 - TEST_SUITE=data32
 - TEST_SUITE=data33
 - TEST_SUITE=data34
 - TEST_SUITE=data35
 - TEST_SUITE=data36
 - TEST_SUITE=data37
 - TEST_SUITE=data38
 - TEST_SUITE=data39
 - TEST_SUITE=data40
 - TEST_SUITE=data41
 - TEST_SUITE=data42
 - TEST_SUITE=data43
 - TEST_SUITE=data44
 - TEST_SUITE=data45
 - TEST_SUITE=data46
 - TEST_SUITE=data47
 - TEST_SUITE=data48
 - TEST_SUITE=data49
 - TEST_SUITE=data50
 - TEST_SUITE=data51
 - TEST_SUITE=data52
 - TEST_SUITE=data53
 - TEST_SUITE=data54
 - TEST_SUITE=data55
 - TEST_SUITE=data56
 - TEST_SUITE=data57
 - TEST_SUITE=data58
 - TEST_SUITE=data59
 - TEST_SUITE=data60
 - TEST_SUITE=data61
 - TEST_SUITE=data62
 - TEST_SUITE=data63
 - TEST_SUITE=data64
 - TEST_SUITE=data65
 - TEST_SUITE=data66
 - TEST_SUITE=data67
 - TEST_SUITE=data68
 - TEST_SUITE=data69
 - TEST_SUITE=data70
 - TEST_SUITE=data71
 - TEST_SUITE=data72
 - TEST_SUITE=data73
 - TEST_SUITE=data74
 - TEST_SUITE=data75
 - TEST_SUITE=data76
 - TEST_SUITE=data77
 - TEST_SUITE=data78
 - TEST_SUITE=data79
 - TEST_SUITE=data80
 - TEST_SUITE=data81
 - TEST_SUITE=data82
 - TEST_SUITE=data83
 - TEST_SUITE=data84
 - TEST_SUITE=data85
 - TEST_SUITE=data86
 - TEST_SUITE=data87
 - TEST_SUITE=data88
 - TEST_SUITE=data89
 - TEST_SUITE=data90
 - TEST_SUITE=data91
 - TEST_SUITE=data92
 - TEST_SUITE=data93
 - TEST_SUITE=data94
 - TEST_SUITE=data95
 - TEST_SUITE=data96
 - TEST_SUITE=data97
 - TEST_SUITE=data98
 - TEST_SUITE=data99
 - TEST_SUITE=data100
 - TEST_SUITE=data101
 - TEST_SUITE=data102
 - TEST_SUITE=data103
 - TEST_SUITE=data104
 - TEST_SUITE=data105
 - TEST_SUITE=data106
 - TEST_SUITE=data107
 - TEST_SUITE=data108
 - TEST_SUITE=data109
 - TEST_SUITE=data110
 - TEST_SUITE=data111

script:
- ./test.sh

before_cache:
- ls -t $HOME/.quark/cache/*.ir | tail -n +2 | xargs -t rm -f
- rm -f target/python/.tox/*/log/*.log

notifications:
  slack:
    rooms:
      secure: E67GlDOEiGoLHvvgmPOJD+B+JA5O9HNC29Hav5CzCCj5f22p4nLBB9p2rIj0wiJXXhe0EePtILRM4oNpWNKS+mbCREXZHQB/668sqoogaVx86vweR+8VOX/BmW2HBlbP3WyOIpxgWKTt7yNj/o+bBr0Ofplu0NDZIflp/QSRJyeL2Phnsx2vbS0XRhk0fp3eLO2O7zymcRMkr8JftbSTfCF6R1ckTjmJshqdEHBuo7DJfWjn47k0+DxP/tWeQCJkIcpNkAtBMLOlqJ73YokOQ5PQsrsDNU5RilLB+Dv5EcycWVDjOgJH9QpXoMcq7dChLZV/MkGegd3yb0ee8EZVPj4mdQpnO8RxWhgSKjLPdkIN3sqGc+31gomz+7Hijk66028BnQ2qsdSeBoEi+RVG7MBUln4lHOk9726Swof533oj+14oSqrO/P6Yzc7Z+9x2XfbeCGgAsiwjDpJXg7BMXVqoaLzqZkmhcL97+QWWpCii45krftWU4bH2An6eZY6fJenIuz7R3NABKkpY+nTCzcGJH12wrHYnJK9M7pe94c+Xek3VDw7qMb6W8P119L/voWUEB3Bf3mdrH0NoChi6PFJdDk1i3aKRO+XXQKYUBAWoQkMOLX0VxzViVLdbKgcxBex9E3++u9pp2Tr+rGMKyy9O7AixZDNV/EFsuMxe8mY=
    on_success: always
    on_failure: always
