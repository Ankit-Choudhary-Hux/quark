File(Import(Name(builtin)),

 Package(Name(builtin),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java, Fixed('Object')),
     NativeCase(py, Fixed('object')), NativeCase(js, Fixed('Object')))),
   Name(Object),

   MethodMacro(Type(Name(bool)), Name(__eq__),
    Param(Type(Name(Object)), Name(other), $type=1.builtin.Object),
    Native(NativeCase(java,
      Fixed('('), Var(Name(self), $type=1.builtin.Object), Fixed(')==('),
      Var(Name(other), $type=1.builtin.Object), Fixed(') || (('),
      Var(Name(self), $type=1.builtin.Object), Fixed(') != null && ('),
      Var(Name(self), $type=1.builtin.Object), Fixed(').equals('),
      Var(Name(other), $type=1.builtin.Object), Fixed('))')), NativeCase(py,
      Fixed('('), Var(Name(self), $type=1.builtin.Object), Fixed(') == ('),
      Var(Name(other), $type=1.builtin.Object), Fixed(')')), NativeCase(js,
      Fixed('('), Var(Name(self), $type=1.builtin.Object), Fixed(') === ('),
      Var(Name(other), $type=1.builtin.Object), Fixed(')')))),

   MethodMacro(Type(Name(bool)), Name(__ne__),
    Param(Type(Name(Object)), Name(other), $type=1.builtin.Object),
    Native(NativeCase(java,
      Fixed('!(('), Var(Name(self), $type=1.builtin.Object), Fixed(')==('),
      Var(Name(other), $type=1.builtin.Object), Fixed(') || (('),
      Var(Name(self), $type=1.builtin.Object), Fixed(') != null && ('),
      Var(Name(self), $type=1.builtin.Object), Fixed(').equals('),
      Var(Name(other), $type=1.builtin.Object), Fixed(')))')), NativeCase(py,
      Fixed('('), Var(Name(self), $type=1.builtin.Object), Fixed(') != ('),
      Var(Name(other), $type=1.builtin.Object), Fixed(')')), NativeCase(js,
      Fixed('('), Var(Name(self), $type=1.builtin.Object), Fixed(') !== ('),
      Var(Name(other), $type=1.builtin.Object), Fixed(')')))),

   MethodMacro(Type(Name(reflect), Name(Class)), Name(getClass),
    Call(Attr(Attr(Var(Name(reflect), $type=1.reflect), Name(Class),
      $type=1.reflect.Class), Name(get), $type=1.reflect.Class.get),
     Native(NativeCase(java,
       Fixed('io.datawire.quark.runtime.Builtins._getClass('), Var(Name(self),
       $type=1.builtin.Object), Fixed(')')), NativeCase(py,
       Fixed('_getClass('), Var(Name(self), $type=1.builtin.Object),
       Fixed(')')), NativeCase(js, Fixed('_qrt._getClass('), Var(Name(self),
       $type=1.builtin.Object), Fixed(')'))), $type=1.reflect.Class)),

   MethodMacro(Type(Name(Object)), Name(getField),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Native(NativeCase(java,
      Fixed('((io.datawire.quark.runtime.QObject) ('), Var(Name(self),
      $type=1.builtin.Object), Fixed('))._getField('), Var(Name(name),
      $type=1.builtin.String), Fixed(')')), NativeCase(py, Fixed('('),
      Var(Name(self), $type=1.builtin.Object), Fixed(')._getField('),
      Var(Name(name), $type=1.builtin.String), Fixed(')')), NativeCase(js,
      Fixed('('), Var(Name(self), $type=1.builtin.Object),
      Fixed(')._getField('), Var(Name(name), $type=1.builtin.String),
      Fixed(')')))),

   MethodMacro(Type(Name(void)), Name(setField),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Param(Type(Name(Object)), Name(value), $type=1.builtin.Object),
    Native(NativeCase(java,
      Fixed('((io.datawire.quark.runtime.QObject) ('), Var(Name(self),
      $type=1.builtin.Object), Fixed('))._setField('), Var(Name(name),
      $type=1.builtin.String), Fixed(', '), Var(Name(value),
      $type=1.builtin.Object), Fixed(')')), NativeCase(py, Fixed('('),
      Var(Name(self), $type=1.builtin.Object), Fixed(')._setField(('),
      Var(Name(name), $type=1.builtin.String), Fixed('), ('), Var(Name(value),
      $type=1.builtin.Object), Fixed('))')), NativeCase(js, Fixed('('),
      Var(Name(self), $type=1.builtin.Object), Fixed(')._setField(('),
      Var(Name(name), $type=1.builtin.String), Fixed('), ('), Var(Name(value),
      $type=1.builtin.Object), Fixed('))'))))),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java, Fixed('void')))),
   Name(void)),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('Boolean')), NativeCase(py, Fixed('bool')), NativeCase(js,
      Fixed('Boolean')))), Name(bool),

   MethodMacro(Type(Name(bool)), Name(__not__), Native(NativeCase(java,
      Fixed('!('), Var(Name(self), $type=1.builtin.bool), Fixed(')')),
     NativeCase(py, Fixed('not ('), Var(Name(self), $type=1.builtin.bool),
      Fixed(')')), NativeCase(js, Fixed('!('), Var(Name(self),
      $type=1.builtin.bool), Fixed(')')))),

   MethodMacro(Type(Name(bool)), Name(__and__),
    Param(Type(Name(bool)), Name(other), $type=1.builtin.bool),
    Native(NativeCase(java,
      Fixed('('), Var(Name(self), $type=1.builtin.bool), Fixed(') && ('),
      Var(Name(other), $type=1.builtin.bool), Fixed(')')), NativeCase(py,
      Fixed('('), Var(Name(self), $type=1.builtin.bool), Fixed(') and ('),
      Var(Name(other), $type=1.builtin.bool), Fixed(')')), NativeCase(js,
      Fixed('('), Var(Name(self), $type=1.builtin.bool), Fixed(') && ('),
      Var(Name(other), $type=1.builtin.bool), Fixed(')')))),

   MethodMacro(Type(Name(bool)), Name(__or__),
    Param(Type(Name(bool)), Name(other), $type=1.builtin.bool),
    Native(NativeCase(java,
      Fixed('('), Var(Name(self), $type=1.builtin.bool), Fixed(') || ('),
      Var(Name(other), $type=1.builtin.bool), Fixed(')')), NativeCase(py,
      Fixed('('), Var(Name(self), $type=1.builtin.bool), Fixed(') or ('),
      Var(Name(other), $type=1.builtin.bool), Fixed(')')), NativeCase(js,
      Fixed('('), Var(Name(self), $type=1.builtin.bool), Fixed(') || ('),
      Var(Name(other), $type=1.builtin.bool), Fixed(')')))),

   MethodMacro(Type(Name(String)), Name(toString), Native(NativeCase(java,
      Fixed('('), Var(Name(self), $type=1.builtin.bool),
      Fixed(').toString()')), NativeCase(py, Fixed('str('), Var(Name(self),
      $type=1.builtin.bool), Fixed(').lower()')), NativeCase(js, Fixed('('),
      Var(Name(self), $type=1.builtin.bool), Fixed(').toString()')))),

   MethodMacro(Type(Name(JSONObject)), Name(toJSON),
    Call(Attr(Call(Type(Name(JSONObject)), $type=1.builtin.JSONObject),
      Name(setBool), $type=1.builtin.JSONObject.setBool), Var(Name(self),
     $type=1.builtin.bool), $type=1.builtin.JSONObject)),

   MethodMacro(Type(Name(JSONObject)), Name(__to_JSONObject),
    Call(Attr(Var(Name(self), $type=1.builtin.bool), Name(toJSON),
     $type=1.builtin.bool.toJSON), $type=1.builtin.JSONObject))),

  Primitive(Name(numeric), TypeParam(Name(T)),

   MethodMacro(Type(Name(T)), Name(__neg__), Native(NativeCase(Fixed('-('),
      Var(Name(self), $type=1.builtin.numeric<1.builtin.numeric.T>),
      Fixed(')')))),

   MethodMacro(Type(Name(T)), Name(__add__),
    Param(Type(Name(T)), Name(other), $type=1.builtin.numeric.T),
    Native(NativeCase(Fixed('('), Var(Name(self),
      $type=1.builtin.numeric<1.builtin.numeric.T>), Fixed(') + ('),
      Var(Name(other), $type=1.builtin.numeric.T), Fixed(')')))),

   MethodMacro(Type(Name(T)), Name(__sub__),
    Param(Type(Name(T)), Name(other), $type=1.builtin.numeric.T),
    Native(NativeCase(Fixed('('), Var(Name(self),
      $type=1.builtin.numeric<1.builtin.numeric.T>), Fixed(') - ('),
      Var(Name(other), $type=1.builtin.numeric.T), Fixed(')')))),

   MethodMacro(Type(Name(T)), Name(__mul__),
    Param(Type(Name(T)), Name(other), $type=1.builtin.numeric.T),
    Native(NativeCase(Fixed('('), Var(Name(self),
      $type=1.builtin.numeric<1.builtin.numeric.T>), Fixed(') * ('),
      Var(Name(other), $type=1.builtin.numeric.T), Fixed(')')))),

   MethodMacro(Type(Name(T)), Name(__div__),
    Param(Type(Name(T)), Name(other), $type=1.builtin.numeric.T),
    Native(NativeCase(Fixed('('), Var(Name(self),
      $type=1.builtin.numeric<1.builtin.numeric.T>), Fixed(') / ('),
      Var(Name(other), $type=1.builtin.numeric.T), Fixed(')')))),

   MethodMacro(Type(Name(bool)), Name(__lt__),
    Param(Type(Name(T)), Name(other), $type=1.builtin.numeric.T),
    Native(NativeCase(Fixed('('), Var(Name(self),
      $type=1.builtin.numeric<1.builtin.numeric.T>), Fixed(') < ('),
      Var(Name(other), $type=1.builtin.numeric.T), Fixed(')')))),

   MethodMacro(Type(Name(bool)), Name(__le__),
    Param(Type(Name(T)), Name(other), $type=1.builtin.numeric.T),
    Native(NativeCase(Fixed('('), Var(Name(self),
      $type=1.builtin.numeric<1.builtin.numeric.T>), Fixed(') <= ('),
      Var(Name(other), $type=1.builtin.numeric.T), Fixed(')')))),

   MethodMacro(Type(Name(bool)), Name(__gt__),
    Param(Type(Name(T)), Name(other), $type=1.builtin.numeric.T),
    Native(NativeCase(Fixed('('), Var(Name(self),
      $type=1.builtin.numeric<1.builtin.numeric.T>), Fixed(') > ('),
      Var(Name(other), $type=1.builtin.numeric.T), Fixed(')')))),

   MethodMacro(Type(Name(bool)), Name(__ge__),
    Param(Type(Name(T)), Name(other), $type=1.builtin.numeric.T),
    Native(NativeCase(Fixed('('), Var(Name(self),
      $type=1.builtin.numeric<1.builtin.numeric.T>), Fixed(') >= ('),
      Var(Name(other), $type=1.builtin.numeric.T), Fixed(')'))))),

  Primitive(Name(integral), TypeParam(Name(T)), Type(Name(numeric),
    Type(Name(T))),

   MethodMacro(Type(Name(T)), Name(__div__),
    Param(Type(Name(T)), Name(other), $type=1.builtin.integral.T),
    Native(NativeCase(java,
      Fixed('~((~('), Var(Name(self),
      $type=1.builtin.integral<1.builtin.integral.T>), Fixed(')) / ('),
      Var(Name(other), $type=1.builtin.integral.T), Fixed('))')),
     NativeCase(py, Fixed('('), Var(Name(self),
      $type=1.builtin.integral<1.builtin.integral.T>), Fixed(') / ('),
      Var(Name(other), $type=1.builtin.integral.T), Fixed(')')), NativeCase(js,
      Fixed('Math.floor(('), Var(Name(self),
      $type=1.builtin.integral<1.builtin.integral.T>), Fixed(') / ('),
      Var(Name(other), $type=1.builtin.integral.T), Fixed('))')))),

   MethodMacro(Type(Name(T)), Name(__mod__),
    Param(Type(Name(T)), Name(other), $type=1.builtin.integral.T),
    Native(NativeCase(java,
      Fixed('Math.floorMod(('), Var(Name(self),
      $type=1.builtin.integral<1.builtin.integral.T>), Fixed('), ('),
      Var(Name(other), $type=1.builtin.integral.T), Fixed('))')),
     NativeCase(py, Fixed('('), Var(Name(self),
      $type=1.builtin.integral<1.builtin.integral.T>), Fixed(') % ('),
      Var(Name(other), $type=1.builtin.integral.T), Fixed(')')), NativeCase(js,
      Fixed('_qrt.modulo(('), Var(Name(self),
      $type=1.builtin.integral<1.builtin.integral.T>), Fixed('), ('),
      Var(Name(other), $type=1.builtin.integral.T), Fixed('))')))),

   MethodMacro(Type(Name(float)), Name(toFloat), Native(NativeCase(java,
      Fixed('Double.valueOf('), Var(Name(self),
      $type=1.builtin.integral<1.builtin.integral.T>), Fixed(')')),
     NativeCase(py, Fixed('float('), Var(Name(self),
      $type=1.builtin.integral<1.builtin.integral.T>), Fixed(')')),
     NativeCase(js, Fixed('('), Var(Name(self),
      $type=1.builtin.integral<1.builtin.integral.T>), Fixed(')')))),

   MethodMacro(Type(Name(JSONObject)), Name(toJSON),
    Call(Attr(Call(Type(Name(JSONObject)), $type=1.builtin.JSONObject),
      Name(setNumber), $type=1.builtin.JSONObject.setNumber), Var(Name(self),
     $type=1.builtin.integral<1.builtin.integral.T>),
    $type=1.builtin.JSONObject)),

   MethodMacro(Type(Name(JSONObject)), Name(__to_JSONObject),
    Call(Attr(Var(Name(self), $type=1.builtin.integral<1.builtin.integral.T>),
      Name(toJSON), $type=1.builtin.integral.toJSON),
    $type=1.builtin.JSONObject))),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java, Fixed('Byte')),
     NativeCase(py, Fixed('int')), NativeCase(js, Fixed('Number')))),
   Name(byte), Type(Name(integral), Type(Name(byte))),

   MethodMacro(Type(Name(String)), Name(toString), Native(NativeCase(java,
      Fixed('Byte.toString('), Var(Name(self), $type=1.builtin.byte),
      Fixed(')')), NativeCase(py, Fixed('str('), Var(Name(self),
      $type=1.builtin.byte), Fixed(')')), NativeCase(js,
      Fixed('_qrt.toString('), Var(Name(self), $type=1.builtin.byte),
      Fixed(')'))))),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java, Fixed('Short')),
     NativeCase(py, Fixed('int')), NativeCase(js, Fixed('Number')))),
   Name(short), Type(Name(integral), Type(Name(short))),

   MethodMacro(Type(Name(String)), Name(toString), Native(NativeCase(java,
      Fixed('Short.toString('), Var(Name(self), $type=1.builtin.short),
      Fixed(')')), NativeCase(py, Fixed('str('), Var(Name(self),
      $type=1.builtin.short), Fixed(')')), NativeCase(js,
      Fixed('_qrt.toString('), Var(Name(self), $type=1.builtin.short),
      Fixed(')'))))),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('Integer')), NativeCase(py, Fixed('int')), NativeCase(js,
      Fixed('Number')))), Name(int), Type(Name(integral), Type(Name(int))),

   MethodMacro(Type(Name(String)), Name(toString), Native(NativeCase(java,
      Fixed('Integer.toString('), Var(Name(self), $type=1.builtin.int),
      Fixed(')')), NativeCase(py, Fixed('str('), Var(Name(self),
      $type=1.builtin.int), Fixed(')')), NativeCase(js,
      Fixed('_qrt.toString('), Var(Name(self), $type=1.builtin.int),
      Fixed(')')))),

   MethodMacro(Type(Name(byte)), Name(__to_byte), Var(Name(self),
    $type=1.builtin.int)),

   MethodMacro(Type(Name(short)), Name(__to_short), Var(Name(self),
    $type=1.builtin.int)),

   MethodMacro(Type(Name(long)), Name(__to_long), Native(NativeCase(java,
      Fixed('new Long('), Var(Name(self), $type=1.builtin.int), Fixed(')')),
     NativeCase(py, Fixed('('), Var(Name(self), $type=1.builtin.int),
      Fixed(')')), NativeCase(js, Fixed('('), Var(Name(self),
      $type=1.builtin.int), Fixed(')'))))),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java, Fixed('Long')),
     NativeCase(py, Fixed('long')), NativeCase(js, Fixed('Number')))),
   Name(long), Type(Name(integral), Type(Name(long))),

   MethodMacro(Type(Name(String)), Name(toString), Native(NativeCase(java,
      Fixed('Long.toString('), Var(Name(self), $type=1.builtin.long),
      Fixed(')')), NativeCase(py, Fixed('str('), Var(Name(self),
      $type=1.builtin.long), Fixed(')')), NativeCase(js,
      Fixed('_qrt.toString('), Var(Name(self), $type=1.builtin.long),
      Fixed(')'))))),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java, Fixed('Double')),
     NativeCase(py, Fixed('float')), NativeCase(js, Fixed('Number')))),
   Name(float), Type(Name(numeric), Type(Name(float))),

   MethodMacro(Type(Name(float)), Name(__div__),
    Param(Type(Name(float)), Name(other), $type=1.builtin.float),
    Native(NativeCase(java,
      Fixed('('), Var(Name(self), $type=1.builtin.float), Fixed(') / ('),
      Var(Name(other), $type=1.builtin.float), Fixed(')')), NativeCase(py,
      Fixed('float('), Var(Name(self), $type=1.builtin.float),
      Fixed(') / float('), Var(Name(other), $type=1.builtin.float),
      Fixed(')')), NativeCase(js, Fixed('('), Var(Name(self),
      $type=1.builtin.float), Fixed(') / ('), Var(Name(other),
      $type=1.builtin.float), Fixed(')')))),

   MethodMacro(Type(Name(long)), Name(round), Native(NativeCase(java,
      Fixed('Math.round('), Var(Name(self), $type=1.builtin.float),
      Fixed(')')), NativeCase(py, Fixed('long(round('), Var(Name(self),
      $type=1.builtin.float), Fixed('))')), NativeCase(javascript,
      Fixed('Math.round('), Var(Name(self), $type=1.builtin.float),
      Fixed(')')))),

   MethodMacro(Type(Name(String)), Name(toString), Native(NativeCase(java,
      Fixed('Double.toString('), Var(Name(self), $type=1.builtin.float),
      Fixed(')')), NativeCase(py, Fixed('repr('), Var(Name(self),
      $type=1.builtin.float), Fixed(')')), NativeCase(js,
      Fixed('_qrt.toString('), Var(Name(self), $type=1.builtin.float),
      Fixed(')')))),

   MethodMacro(Type(Name(JSONObject)), Name(toJSON),
    Call(Attr(Call(Type(Name(JSONObject)), $type=1.builtin.JSONObject),
      Name(setNumber), $type=1.builtin.JSONObject.setNumber), Var(Name(self),
     $type=1.builtin.float), $type=1.builtin.JSONObject)),

   MethodMacro(Type(Name(JSONObject)), Name(__to_JSONObject),
    Call(Attr(Var(Name(self), $type=1.builtin.float), Name(toJSON),
     $type=1.builtin.float.toJSON), $type=1.builtin.JSONObject))),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java, Fixed('String')),
     NativeCase(py, Fixed('str')), NativeCase(js, Fixed('String')))),
   Name(String),

   MethodMacro(Type(Name(String)), Name(__add__),
    Param(Type(Name(String)), Name(other), $type=1.builtin.String),
    Native(NativeCase(Fixed('('), Var(Name(self), $type=1.builtin.String),
      Fixed(') + ('), Var(Name(other), $type=1.builtin.String), Fixed(')')))),

   MethodMacro(Type(Name(int)), Name(size), Native(NativeCase(java, Fixed('('),
      Var(Name(self), $type=1.builtin.String), Fixed(').length()')),
     NativeCase(py, Fixed('len('), Var(Name(self), $type=1.builtin.String),
      Fixed(')')), NativeCase(js, Fixed('('), Var(Name(self),
      $type=1.builtin.String), Fixed(').length')))),

   MethodMacro(Type(Name(bool)), Name(startsWith),
    Param(Type(Name(String)), Name(other), $type=1.builtin.String),
    Native(NativeCase(java,
      Fixed('Boolean.valueOf(('), Var(Name(self), $type=1.builtin.String),
      Fixed(').startsWith('), Var(Name(other), $type=1.builtin.String),
      Fixed('))')), NativeCase(py, Fixed('('), Var(Name(self),
      $type=1.builtin.String), Fixed(').startswith('), Var(Name(other),
      $type=1.builtin.String), Fixed(')')), NativeCase(js, Fixed('(('),
      Var(Name(self), $type=1.builtin.String), Fixed(').indexOf('),
      Var(Name(other), $type=1.builtin.String), Fixed(')===0)')))),

   MethodMacro(Type(Name(bool)), Name(endsWith),
    Param(Type(Name(String)), Name(other), $type=1.builtin.String),
    Native(NativeCase(java,
      Fixed('Boolean.valueOf(('), Var(Name(self), $type=1.builtin.String),
      Fixed(').endsWith('), Var(Name(other), $type=1.builtin.String),
      Fixed('))')), NativeCase(py, Fixed('('), Var(Name(self),
      $type=1.builtin.String), Fixed(').endswith('), Var(Name(other),
      $type=1.builtin.String), Fixed(')')), NativeCase(js, Fixed('(('),
      Var(Name(self), $type=1.builtin.String), Fixed(').indexOf(('),
      Var(Name(other), $type=1.builtin.String), Fixed('), ('), Var(Name(self),
      $type=1.builtin.String), Fixed(').length - ('), Var(Name(other),
      $type=1.builtin.String), Fixed(').length) !== -1)')))),

   MethodMacro(Type(Name(int)), Name(find),
    Param(Type(Name(String)), Name(other), $type=1.builtin.String),
    Native(NativeCase(java,
      Fixed('('), Var(Name(self), $type=1.builtin.String), Fixed(').indexOf('),
      Var(Name(other), $type=1.builtin.String), Fixed(')')), NativeCase(py,
      Fixed('('), Var(Name(self), $type=1.builtin.String), Fixed(').find('),
      Var(Name(other), $type=1.builtin.String), Fixed(')')), NativeCase(js,
      Fixed('('), Var(Name(self), $type=1.builtin.String), Fixed(').indexOf('),
      Var(Name(other), $type=1.builtin.String), Fixed(')')))),

   MethodMacro(Type(Name(String)), Name(substring),
    Param(Type(Name(int)), Name(start), $type=1.builtin.int),
    Param(Type(Name(int)), Name(end), $type=1.builtin.int),
    Native(NativeCase(java,
      Fixed('('), Var(Name(self), $type=1.builtin.String),
      Fixed(').substring(('), Var(Name(start), $type=1.builtin.int),
      Fixed('), ('), Var(Name(end), $type=1.builtin.int), Fixed('))')),
     NativeCase(py, Fixed('('), Var(Name(self), $type=1.builtin.String),
      Fixed(')[('), Var(Name(start), $type=1.builtin.int), Fixed('):('),
      Var(Name(end), $type=1.builtin.int), Fixed(')]')), NativeCase(js,
      Fixed('('), Var(Name(self), $type=1.builtin.String),
      Fixed(').substring(('), Var(Name(start), $type=1.builtin.int),
      Fixed('), ('), Var(Name(end), $type=1.builtin.int), Fixed('))')))),

   MethodMacro(Type(Name(String)), Name(replace),
    Param(Type(Name(String)), Name(from), $type=1.builtin.String),
    Param(Type(Name(String)), Name(to), $type=1.builtin.String),
    Native(NativeCase(java,
      Fixed('('), Var(Name(self), $type=1.builtin.String),
      Fixed(').replaceFirst(java.util.regex.Pattern.quote('), Var(Name(from),
      $type=1.builtin.String), Fixed('), ('), Var(Name(to),
      $type=1.builtin.String), Fixed('))')), NativeCase(py, Fixed('('),
      Var(Name(self), $type=1.builtin.String), Fixed(').replace(('),
      Var(Name(from), $type=1.builtin.String), Fixed('), ('), Var(Name(to),
      $type=1.builtin.String), Fixed('), 1)')), NativeCase(js, Fixed('('),
      Var(Name(self), $type=1.builtin.String), Fixed(').replace(('),
      Var(Name(from), $type=1.builtin.String), Fixed('), ('), Var(Name(to),
      $type=1.builtin.String), Fixed('))')))),

   MethodMacro(Type(Name(List), Type(Name(String))), Name(split),
    Param(Type(Name(String)), Name(sep), $type=1.builtin.String),
    Native(NativeCase(java,
      Fixed('new java.util.ArrayList<String>(java.util.Arrays.asList(('),
      Var(Name(self), $type=1.builtin.String),
      Fixed(').split(java.util.regex.Pattern.quote('), Var(Name(sep),
      $type=1.builtin.String), Fixed('), -1)))')), NativeCase(py, Fixed('('),
      Var(Name(self), $type=1.builtin.String), Fixed(').split('),
      Var(Name(sep), $type=1.builtin.String), Fixed(')')), NativeCase(js,
      Fixed('('), Var(Name(self), $type=1.builtin.String), Fixed(').split('),
      Var(Name(sep), $type=1.builtin.String), Fixed(')')))),

   MethodMacro(Type(Name(String)), Name(join),
    Param(Type(Name(List), Type(Name(String))), Name(parts),
    $type=1.builtin.List<1.builtin.String>),
    Native(NativeCase(java,
      Fixed('io.datawire.quark.runtime.Builtins.join(('), Var(Name(self),
      $type=1.builtin.String), Fixed('), ('), Var(Name(parts),
      $type=1.builtin.List<1.builtin.String>), Fixed('))')), NativeCase(py,
      Fixed('('), Var(Name(self), $type=1.builtin.String), Fixed(').join('),
      Var(Name(parts), $type=1.builtin.List<1.builtin.String>), Fixed(')')),
     NativeCase(js, Fixed('('), Var(Name(parts),
      $type=1.builtin.List<1.builtin.String>), Fixed(').join('),
      Var(Name(self), $type=1.builtin.String), Fixed(')')))),

   MethodMacro(Type(Name(JSONObject)), Name(toJSON),
    Call(Attr(Call(Type(Name(JSONObject)), $type=1.builtin.JSONObject),
      Name(setString), $type=1.builtin.JSONObject.setString), Var(Name(self),
     $type=1.builtin.String), $type=1.builtin.JSONObject)),

   MethodMacro(Type(Name(JSONObject)), Name(__to_JSONObject),
    Call(Attr(Var(Name(self), $type=1.builtin.String), Name(toJSON),
     $type=1.builtin.String.toJSON), $type=1.builtin.JSONObject)),

   MethodMacro(Type(Name(JSONObject)), Name(parseJSON), Native(NativeCase(java,
      Fixed('io.datawire.quark.runtime.JSONObject.parse('), Var(Name(self),
      $type=1.builtin.String), Fixed(')')), NativeCase(py,
      Fixed('_JSONObject.parse('), Var(Name(self), $type=1.builtin.String),
      Fixed(')')), NativeCase(js, Fixed('_qrt.json_from_string('),
      Var(Name(self), $type=1.builtin.String), Fixed(')'))))),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('java.util.ArrayList')), NativeCase(py, Fixed('_List')),
     NativeCase(js, Fixed('Array')))), Name(List), TypeParam(Name(T)),

   MethodMacro(Type(Name(void)), Name(add),
    Param(Type(Name(T)), Name(element), $type=1.builtin.List.T),
    Native(NativeCase(java,
      Fixed('('), Var(Name(self), $type=1.builtin.List<1.builtin.List.T>),
      Fixed(').add('), Var(Name(element), $type=1.builtin.List.T), Fixed(')')),
     NativeCase(py, Fixed('('), Var(Name(self),
      $type=1.builtin.List<1.builtin.List.T>), Fixed(').append('),
      Var(Name(element), $type=1.builtin.List.T), Fixed(')')), NativeCase(js,
      Fixed('('), Var(Name(self), $type=1.builtin.List<1.builtin.List.T>),
      Fixed(').push('), Var(Name(element), $type=1.builtin.List.T),
      Fixed(')')))),

   MethodMacro(Type(Name(T)), Name(__get__),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int),
    Native(NativeCase(java,
      Fixed('('), Var(Name(self), $type=1.builtin.List<1.builtin.List.T>),
      Fixed(').get('), Var(Name(index), $type=1.builtin.int), Fixed(')')),
     NativeCase(py, Fixed('('), Var(Name(self),
      $type=1.builtin.List<1.builtin.List.T>), Fixed(')['), Var(Name(index),
      $type=1.builtin.int), Fixed(']')), NativeCase(js, Fixed('('),
      Var(Name(self), $type=1.builtin.List<1.builtin.List.T>), Fixed(')['),
      Var(Name(index), $type=1.builtin.int), Fixed(']')))),

   MethodMacro(Type(Name(void)), Name(__set__),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int),
    Param(Type(Name(T)), Name(value), $type=1.builtin.List.T),
    Native(NativeCase(java,
      Fixed('('), Var(Name(self), $type=1.builtin.List<1.builtin.List.T>),
      Fixed(').set(('), Var(Name(index), $type=1.builtin.int), Fixed('), ('),
      Var(Name(value), $type=1.builtin.List.T), Fixed('))')), NativeCase(py,
      Fixed('('), Var(Name(self), $type=1.builtin.List<1.builtin.List.T>),
      Fixed(')['), Var(Name(index), $type=1.builtin.int), Fixed('] = ('),
      Var(Name(value), $type=1.builtin.List.T), Fixed(')')), NativeCase(js,
      Fixed('('), Var(Name(self), $type=1.builtin.List<1.builtin.List.T>),
      Fixed(')['), Var(Name(index), $type=1.builtin.int), Fixed('] = ('),
      Var(Name(value), $type=1.builtin.List.T), Fixed(')')))),

   MethodMacro(Type(Name(int)), Name(size), Native(NativeCase(java, Fixed('('),
      Var(Name(self), $type=1.builtin.List<1.builtin.List.T>),
      Fixed(').size()')), NativeCase(py, Fixed('len('), Var(Name(self),
      $type=1.builtin.List<1.builtin.List.T>), Fixed(')')), NativeCase(js,
      Fixed('('), Var(Name(self), $type=1.builtin.List<1.builtin.List.T>),
      Fixed(').length'))))),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('java.util.HashMap')), NativeCase(py, Fixed('_Map')),
     NativeCase(js, Fixed('Map')))), Name(Map), TypeParam(Name(K)),
   TypeParam(Name(V)),

   MethodMacro(Type(Name(void)), Name(__set__),
    Param(Type(Name(K)), Name(key), $type=1.builtin.Map.K),
    Param(Type(Name(V)), Name(value), $type=1.builtin.Map.V),
    Native(NativeCase(java,
      Fixed('('), Var(Name(self),
      $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>), Fixed(').put(('),
      Var(Name(key), $type=1.builtin.Map.K), Fixed('), ('), Var(Name(value),
      $type=1.builtin.Map.V), Fixed('))')), NativeCase(py, Fixed('('),
      Var(Name(self), $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>),
      Fixed(')['), Var(Name(key), $type=1.builtin.Map.K), Fixed('] = ('),
      Var(Name(value), $type=1.builtin.Map.V), Fixed(')')), NativeCase(js,
      Fixed('('), Var(Name(self),
      $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>), Fixed(').set(('),
      Var(Name(key), $type=1.builtin.Map.K), Fixed('), ('), Var(Name(value),
      $type=1.builtin.Map.V), Fixed('))')))),

   MethodMacro(Type(Name(V)), Name(__get__),
    Param(Type(Name(K)), Name(key), $type=1.builtin.Map.K),
    Native(NativeCase(java,
      Fixed('('), Var(Name(self),
      $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>), Fixed(').get('),
      Var(Name(key), $type=1.builtin.Map.K), Fixed(')')), NativeCase(py,
      Fixed('('), Var(Name(self),
      $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>), Fixed(').get('),
      Var(Name(key), $type=1.builtin.Map.K), Fixed(')')), NativeCase(js,
      Fixed('_qrt.map_get(('), Var(Name(self),
      $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>), Fixed('), ('),
      Var(Name(key), $type=1.builtin.Map.K), Fixed('))')))),

   MethodMacro(Type(Name(int)), Name(contains),
    Param(Type(Name(K)), Name(key), $type=1.builtin.Map.K),
    Native(NativeCase(java,
      Fixed('('), Var(Name(self),
      $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>),
      Fixed(').containsKey('), Var(Name(key), $type=1.builtin.Map.K),
      Fixed(')')), NativeCase(py, Fixed('('), Var(Name(key),
      $type=1.builtin.Map.K), Fixed(') in ('), Var(Name(self),
      $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>), Fixed(')')),
     NativeCase(js, Fixed('('), Var(Name(self),
      $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>), Fixed(').has('),
      Var(Name(key), $type=1.builtin.Map.K), Fixed(')')))),

   MethodMacro(Type(Name(void)), Name(update),
    Param(Type(Name(Map), Type(Name(K)), Type(Name(V))), Name(other),
    $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>),
    Native(NativeCase(java,
      Fixed('('), Var(Name(self),
      $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>),
      Fixed(').putAll('), Var(Name(other),
      $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>), Fixed(')')),
     NativeCase(py, Fixed('('), Var(Name(self),
      $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>),
      Fixed(').update('), Var(Name(other),
      $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>), Fixed(')')),
     NativeCase(js, Fixed('('), Var(Name(other),
      $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>),
      Fixed(').forEach(function (v, k) '), Fixed('{'), Fixed(' ('),
      Var(Name(self), $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>),
      Fixed(').set(k, v); '), Fixed('}'), Fixed(')')))),

   MethodMacro(Type(Name(String)), Name(urlencode), Native(NativeCase(java,
      Fixed('io.datawire.quark.runtime.Builtins.urlencode('), Var(Name(self),
      $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>), Fixed(')')),
     NativeCase(py, Fixed('_urlencode('), Var(Name(self),
      $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>), Fixed(')')),
     NativeCase(js, Fixed('_qrt.urlencode('), Var(Name(self),
      $type=1.builtin.Map<1.builtin.Map.K,1.builtin.Map.V>), Fixed(')'))))),

  Function(Type(Name(JSONObject)), Name(toJSON),
   Param(Type(Name(Object)), Name(obj), $type=1.builtin.Object),
   Block(
    Local(
     Declaration(Type(Name(JSONObject)), Name(result),
      Call(Type(Name(JSONObject)), $type=1.builtin.JSONObject),
     $type=1.builtin.JSONObject)),
    If(Call(Attr(Var(Name(obj), $type=1.builtin.Object), Name(__eq__),
      $type=1.builtin.Object.__eq__), Null(null, $type=1.builtin.Object),
     $type=1.builtin.bool), Block(
      ExprStmt(Call(Attr(Var(Name(result), $type=1.builtin.JSONObject),
         Name(setNull), $type=1.builtin.JSONObject.setNull),
       $type=1.builtin.JSONObject)),
      Return(Var(Name(result), $type=1.builtin.JSONObject)))),
    Local(
     Declaration(Type(Name(reflect), Name(Class)), Name(cls),
      Call(Attr(Var(Name(obj), $type=1.builtin.Object), Name(getClass),
       $type=1.builtin.Object.getClass), $type=1.reflect.Class),
     $type=1.reflect.Class)),
    Local(
     Declaration(Type(Name(int)), Name(idx), Number(0, $type=1.builtin.int),
     $type=1.builtin.int)),
    If(Call(Attr(Attr(Var(Name(cls), $type=1.reflect.Class), Name(name),
       $type=1.builtin.String), Name(__eq__), $type=1.builtin.Object.__eq__),
      String("builtin.String", $type=1.builtin.String), $type=1.builtin.bool),
     Block(
      ExprStmt(Call(Attr(Var(Name(result), $type=1.builtin.JSONObject),
         Name(setString), $type=1.builtin.JSONObject.setString),
        Cast(Var(Name(obj), $type=1.builtin.Object), $type=1.builtin.String),
       $type=1.builtin.JSONObject)),
      Return(Var(Name(result), $type=1.builtin.JSONObject)))),
    If(Call(Attr(Call(Attr(Call(Attr(Call(Attr(Call(Attr(Attr(Var(Name(cls),
                $type=1.reflect.Class), Name(name), $type=1.builtin.String),
               Name(__eq__), $type=1.builtin.Object.__eq__),
              String("builtin.byte", $type=1.builtin.String),
             $type=1.builtin.bool), Name(__or__), $type=1.builtin.bool.__or__),
            Call(Attr(Attr(Var(Name(cls), $type=1.reflect.Class), Name(name),
              $type=1.builtin.String), Name(__eq__),
             $type=1.builtin.Object.__eq__), String("builtin.short",
             $type=1.builtin.String), $type=1.builtin.bool),
           $type=1.builtin.bool), Name(__or__), $type=1.builtin.bool.__or__),
          Call(Attr(Attr(Var(Name(cls), $type=1.reflect.Class), Name(name),
            $type=1.builtin.String), Name(__eq__),
           $type=1.builtin.Object.__eq__), String("builtin.int",
           $type=1.builtin.String), $type=1.builtin.bool),
         $type=1.builtin.bool), Name(__or__), $type=1.builtin.bool.__or__),
        Call(Attr(Attr(Var(Name(cls), $type=1.reflect.Class), Name(name),
          $type=1.builtin.String), Name(__eq__),
         $type=1.builtin.Object.__eq__), String("builtin.long",
         $type=1.builtin.String), $type=1.builtin.bool), $type=1.builtin.bool),
       Name(__or__), $type=1.builtin.bool.__or__),
      Call(Attr(Attr(Var(Name(cls), $type=1.reflect.Class), Name(name),
        $type=1.builtin.String), Name(__eq__), $type=1.builtin.Object.__eq__),
       String("builtin.float", $type=1.builtin.String), $type=1.builtin.bool),
     $type=1.builtin.bool), Block(
      ExprStmt(Call(Attr(Var(Name(result), $type=1.builtin.JSONObject),
         Name(setNumber), $type=1.builtin.JSONObject.setNumber), Var(Name(obj),
        $type=1.builtin.Object), $type=1.builtin.JSONObject)),
      Return(Var(Name(result), $type=1.builtin.JSONObject)))),
    If(Call(Attr(Attr(Var(Name(cls), $type=1.reflect.Class), Name(name),
       $type=1.builtin.String), Name(__eq__), $type=1.builtin.Object.__eq__),
      String("builtin.List", $type=1.builtin.String), $type=1.builtin.bool),
     Block(
      ExprStmt(Call(Attr(Var(Name(result), $type=1.builtin.JSONObject),
         Name(setList), $type=1.builtin.JSONObject.setList),
       $type=1.builtin.JSONObject)),
      Local(
       Declaration(Type(Name(List), Type(Name(Object))), Name(list),
        Cast(Var(Name(obj), $type=1.builtin.Object),
        $type=1.builtin.List<1.builtin.Object>),
       $type=1.builtin.List<1.builtin.Object>)),
      While(Call(Attr(Var(Name(idx), $type=1.builtin.int), Name(__lt__),
        $type=1.builtin.numeric.__lt__), Call(Attr(Var(Name(list),
          $type=1.builtin.List<1.builtin.Object>), Name(size),
         $type=1.builtin.List.size), $type=1.builtin.int),
       $type=1.builtin.bool), Block(
        ExprStmt(Call(Attr(Var(Name(result), $type=1.builtin.JSONObject),
           Name(setListItem), $type=1.builtin.JSONObject.setListItem),
          Var(Name(idx), $type=1.builtin.int), Call(Var(Name(toJSON),
           $type=1.builtin.toJSON), Call(Attr(Var(Name(list),
             $type=1.builtin.List<1.builtin.Object>), Name(__get__),
            $type=1.builtin.List.__get__), Var(Name(idx), $type=1.builtin.int),
           $type=1.builtin.Object), $type=1.builtin.JSONObject),
         $type=1.builtin.JSONObject)),
        Assign(Var(Name(idx), $type=1.builtin.int), Call(Attr(Var(Name(idx),
           $type=1.builtin.int), Name(__add__),
          $type=1.builtin.numeric.__add__), Number(1, $type=1.builtin.int),
         $type=1.builtin.int)))),
      Return(Var(Name(result), $type=1.builtin.JSONObject)))),
    If(Call(Attr(Attr(Var(Name(cls), $type=1.reflect.Class), Name(name),
       $type=1.builtin.String), Name(__eq__), $type=1.builtin.Object.__eq__),
      String("builtin.Map", $type=1.builtin.String), $type=1.builtin.bool),
     Block(
      ExprStmt(Call(Attr(Var(Name(result), $type=1.builtin.JSONObject),
         Name(setObject), $type=1.builtin.JSONObject.setObject),
       $type=1.builtin.JSONObject)),
      Local(
       Declaration(Type(Name(Map), Type(Name(String)), Type(Name(Object))),
        Name(map), Cast(Var(Name(obj), $type=1.builtin.Object),
        $type=1.builtin.Map<1.builtin.String,1.builtin.Object>),
       $type=1.builtin.Map<1.builtin.String,1.builtin.Object>)),
      Return(Var(Name(result), $type=1.builtin.JSONObject)))),
    ExprStmt(Call(Attr(Var(Name(result), $type=1.builtin.JSONObject),
       Name(__set__), $type=1.builtin.JSONObject.__set__), String("$class",
      $type=1.builtin.String), Var(Name(cls), $type=1.reflect.Class),
     $type=1.builtin.void)),
    Local(
     Declaration(Type(Name(List), Type(Name(reflect), Name(Field))),
      Name(fields), Call(Attr(Var(Name(cls), $type=1.reflect.Class),
        Name(getFields), $type=1.reflect.Class.getFields),
      $type=1.builtin.List<1.reflect.Field>),
     $type=1.builtin.List<1.reflect.Field>)),
    While(Call(Attr(Var(Name(idx), $type=1.builtin.int), Name(__lt__),
      $type=1.builtin.numeric.__lt__), Call(Attr(Var(Name(fields),
        $type=1.builtin.List<1.reflect.Field>), Name(size),
       $type=1.builtin.List.size), $type=1.builtin.int), $type=1.builtin.bool),
     Block(
      ExprStmt(Call(Attr(Var(Name(result), $type=1.builtin.JSONObject),
         Name(__set__), $type=1.builtin.JSONObject.__set__),
        Attr(Call(Attr(Var(Name(fields),
           $type=1.builtin.List<1.reflect.Field>), Name(__get__),
          $type=1.builtin.List.__get__), Var(Name(idx), $type=1.builtin.int),
         $type=1.reflect.Field), Name(name), $type=1.builtin.String),
        Call(Var(Name(toJSON), $type=1.builtin.toJSON),
         Call(Attr(Var(Name(obj), $type=1.builtin.Object), Name(getField),
          $type=1.builtin.Object.getField), Attr(Call(Attr(Var(Name(fields),
             $type=1.builtin.List<1.reflect.Field>), Name(__get__),
            $type=1.builtin.List.__get__), Var(Name(idx), $type=1.builtin.int),
           $type=1.reflect.Field), Name(name), $type=1.builtin.String),
         $type=1.builtin.Object), $type=1.builtin.JSONObject),
       $type=1.builtin.void)),
      Assign(Var(Name(idx), $type=1.builtin.int), Call(Attr(Var(Name(idx),
         $type=1.builtin.int), Name(__add__), $type=1.builtin.numeric.__add__),
        Number(1, $type=1.builtin.int), $type=1.builtin.int)))),
    Return(Var(Name(result), $type=1.builtin.JSONObject)))),

  Function(Type(Name(Object)), Name(fromJSON),
   Param(Type(Name(reflect), Name(Class)), Name(cls), $type=1.reflect.Class),
   Param(Type(Name(JSONObject)), Name(json), $type=1.builtin.JSONObject),
   Block(
    If(Call(Attr(Call(Attr(Var(Name(json), $type=1.builtin.JSONObject),
         Name(__eq__), $type=1.builtin.Object.__eq__), Null(null,
        $type=1.builtin.Object), $type=1.builtin.bool), Name(__or__),
      $type=1.builtin.bool.__or__), Call(Attr(Var(Name(json),
        $type=1.builtin.JSONObject), Name(isNull),
       $type=1.builtin.JSONObject.isNull), $type=1.builtin.bool),
     $type=1.builtin.bool), Block(
      Return(Null(null, $type=1.builtin.Object)))),
    Local(
     Declaration(Type(Name(int)), Name(idx), Number(0, $type=1.builtin.int),
     $type=1.builtin.int)),
    If(Call(Attr(Attr(Var(Name(cls), $type=1.reflect.Class), Name(name),
       $type=1.builtin.String), Name(__eq__), $type=1.builtin.Object.__eq__),
      String("builtin.List", $type=1.builtin.String), $type=1.builtin.bool),
     Block(
      Local(
       Declaration(Type(Name(List), Type(Name(Object))), Name(list),
        Cast(Call(Attr(Var(Name(cls), $type=1.reflect.Class), Name(construct),
          $type=1.reflect.Class.construct), List(,
          $type=1.builtin.List<1.builtin.Object>), $type=1.builtin.Object),
        $type=1.builtin.List<1.builtin.Object>),
       $type=1.builtin.List<1.builtin.Object>)),
      While(Call(Attr(Var(Name(idx), $type=1.builtin.int), Name(__lt__),
        $type=1.builtin.numeric.__lt__), Call(Attr(Var(Name(json),
          $type=1.builtin.JSONObject), Name(size),
         $type=1.builtin.JSONObject.size), $type=1.builtin.int),
       $type=1.builtin.bool), Block(
        ExprStmt(Call(Attr(Var(Name(list),
           $type=1.builtin.List<1.builtin.Object>), Name(add),
          $type=1.builtin.List.add), Call(Var(Name(fromJSON),
           $type=1.builtin.fromJSON), Call(Attr(Attr(Var(Name(cls),
              $type=1.reflect.Class), Name(parameters),
             $type=1.builtin.List<1.reflect.Class>), Name(__get__),
            $type=1.builtin.List.__get__), Number(0, $type=1.builtin.int),
           $type=1.reflect.Class), Call(Attr(Var(Name(json),
             $type=1.builtin.JSONObject), Name(getListItem),
            $type=1.builtin.JSONObject.getListItem), Var(Name(idx),
            $type=1.builtin.int), $type=1.builtin.JSONObject),
          $type=1.builtin.Object), $type=1.builtin.void)),
        Assign(Var(Name(idx), $type=1.builtin.int), Call(Attr(Var(Name(idx),
           $type=1.builtin.int), Name(__add__),
          $type=1.builtin.numeric.__add__), Number(1, $type=1.builtin.int),
         $type=1.builtin.int)))),
      Return(Var(Name(list), $type=1.builtin.List<1.builtin.Object>)))),
    Local(
     Declaration(Type(Name(List), Type(Name(reflect), Name(Field))),
      Name(fields), Call(Attr(Var(Name(cls), $type=1.reflect.Class),
        Name(getFields), $type=1.reflect.Class.getFields),
      $type=1.builtin.List<1.reflect.Field>),
     $type=1.builtin.List<1.reflect.Field>)),
    Local(
     Declaration(Type(Name(Object)), Name(result), Call(Attr(Var(Name(cls),
        $type=1.reflect.Class), Name(construct),
       $type=1.reflect.Class.construct), List(,
       $type=1.builtin.List<1.builtin.Object>), $type=1.builtin.Object),
     $type=1.builtin.Object)),
    While(Call(Attr(Var(Name(idx), $type=1.builtin.int), Name(__lt__),
      $type=1.builtin.numeric.__lt__), Call(Attr(Var(Name(fields),
        $type=1.builtin.List<1.reflect.Field>), Name(size),
       $type=1.builtin.List.size), $type=1.builtin.int), $type=1.builtin.bool),
     Block(
      Local(
       Declaration(Type(Name(reflect), Name(Field)), Name(f),
        Call(Attr(Var(Name(fields), $type=1.builtin.List<1.reflect.Field>),
          Name(__get__), $type=1.builtin.List.__get__), Var(Name(idx),
         $type=1.builtin.int), $type=1.reflect.Field), $type=1.reflect.Field)),
      Assign(Var(Name(idx), $type=1.builtin.int), Call(Attr(Var(Name(idx),
         $type=1.builtin.int), Name(__add__), $type=1.builtin.numeric.__add__),
        Number(1, $type=1.builtin.int), $type=1.builtin.int)),
      If(Call(Attr(Attr(Call(Attr(Var(Name(f), $type=1.reflect.Field),
            Name(getType), $type=1.reflect.Field.getType),
          $type=1.reflect.Class), Name(name), $type=1.builtin.String),
         Name(__eq__), $type=1.builtin.Object.__eq__), String("builtin.String",
        $type=1.builtin.String), $type=1.builtin.bool), Block(
        Local(
         Declaration(Type(Name(String)), Name(s), Call(Attr(Var(Name(json),
            $type=1.builtin.JSONObject), Name(__get__),
           $type=1.builtin.JSONObject.__get__), Attr(Var(Name(f),
            $type=1.reflect.Field), Name(name), $type=1.builtin.String),
          $type=1.builtin.JSONObject), $type=1.builtin.String)),
        ExprStmt(Call(Attr(Var(Name(result), $type=1.builtin.Object),
           Name(setField), $type=1.builtin.Object.setField), Attr(Var(Name(f),
           $type=1.reflect.Field), Name(name), $type=1.builtin.String),
          Var(Name(s), $type=1.builtin.String), $type=1.builtin.void)),
        Continue())),
      If(Call(Attr(Attr(Call(Attr(Var(Name(f), $type=1.reflect.Field),
            Name(getType), $type=1.reflect.Field.getType),
          $type=1.reflect.Class), Name(name), $type=1.builtin.String),
         Name(__eq__), $type=1.builtin.Object.__eq__), String("builtin.float",
        $type=1.builtin.String), $type=1.builtin.bool), Block(
        Local(
         Declaration(Type(Name(float)), Name(flt), Call(Attr(Var(Name(json),
            $type=1.builtin.JSONObject), Name(__get__),
           $type=1.builtin.JSONObject.__get__), Attr(Var(Name(f),
            $type=1.reflect.Field), Name(name), $type=1.builtin.String),
          $type=1.builtin.JSONObject), $type=1.builtin.float)),
        ExprStmt(Call(Attr(Var(Name(result), $type=1.builtin.Object),
           Name(setField), $type=1.builtin.Object.setField), Attr(Var(Name(f),
           $type=1.reflect.Field), Name(name), $type=1.builtin.String),
          Var(Name(flt), $type=1.builtin.float), $type=1.builtin.void)),
        Continue())),
      If(Call(Attr(Attr(Call(Attr(Var(Name(f), $type=1.reflect.Field),
            Name(getType), $type=1.reflect.Field.getType),
          $type=1.reflect.Class), Name(name), $type=1.builtin.String),
         Name(__eq__), $type=1.builtin.Object.__eq__), String("builtin.int",
        $type=1.builtin.String), $type=1.builtin.bool), Block(
        If(Call(Attr(Call(Attr(Call(Attr(Var(Name(json),
               $type=1.builtin.JSONObject), Name(__get__),
              $type=1.builtin.JSONObject.__get__), Attr(Var(Name(f),
               $type=1.reflect.Field), Name(name), $type=1.builtin.String),
             $type=1.builtin.JSONObject), Name(isNull),
            $type=1.builtin.JSONObject.isNull), $type=1.builtin.bool),
           Name(__not__), $type=1.builtin.bool.__not__), $type=1.builtin.bool),
         Block(
          Local(
           Declaration(Type(Name(int)), Name(i), Call(Attr(Var(Name(json),
              $type=1.builtin.JSONObject), Name(__get__),
             $type=1.builtin.JSONObject.__get__), Attr(Var(Name(f),
              $type=1.reflect.Field), Name(name), $type=1.builtin.String),
            $type=1.builtin.JSONObject), $type=1.builtin.int)),
          ExprStmt(Call(Attr(Var(Name(result), $type=1.builtin.Object),
             Name(setField), $type=1.builtin.Object.setField),
            Attr(Var(Name(f), $type=1.reflect.Field), Name(name),
            $type=1.builtin.String), Var(Name(i), $type=1.builtin.int),
           $type=1.builtin.void)))),
        Continue())),
      If(Call(Attr(Attr(Call(Attr(Var(Name(f), $type=1.reflect.Field),
            Name(getType), $type=1.reflect.Field.getType),
          $type=1.reflect.Class), Name(name), $type=1.builtin.String),
         Name(__eq__), $type=1.builtin.Object.__eq__), String("builtin.bool",
        $type=1.builtin.String), $type=1.builtin.bool), Block(
        If(Call(Attr(Call(Attr(Call(Attr(Var(Name(json),
               $type=1.builtin.JSONObject), Name(__get__),
              $type=1.builtin.JSONObject.__get__), Attr(Var(Name(f),
               $type=1.reflect.Field), Name(name), $type=1.builtin.String),
             $type=1.builtin.JSONObject), Name(isNull),
            $type=1.builtin.JSONObject.isNull), $type=1.builtin.bool),
           Name(__not__), $type=1.builtin.bool.__not__), $type=1.builtin.bool),
         Block(
          Local(
           Declaration(Type(Name(bool)), Name(b), Call(Attr(Var(Name(json),
              $type=1.builtin.JSONObject), Name(__get__),
             $type=1.builtin.JSONObject.__get__), Attr(Var(Name(f),
              $type=1.reflect.Field), Name(name), $type=1.builtin.String),
            $type=1.builtin.JSONObject), $type=1.builtin.bool)),
          ExprStmt(Call(Attr(Var(Name(result), $type=1.builtin.Object),
             Name(setField), $type=1.builtin.Object.setField),
            Attr(Var(Name(f), $type=1.reflect.Field), Name(name),
            $type=1.builtin.String), Var(Name(b), $type=1.builtin.bool),
           $type=1.builtin.void)))),
        Continue())),
      ExprStmt(Call(Attr(Var(Name(result), $type=1.builtin.Object),
         Name(setField), $type=1.builtin.Object.setField), Attr(Var(Name(f),
         $type=1.reflect.Field), Name(name), $type=1.builtin.String),
        Call(Var(Name(fromJSON), $type=1.builtin.fromJSON),
         Call(Attr(Var(Name(f), $type=1.reflect.Field), Name(getType),
          $type=1.reflect.Field.getType), $type=1.reflect.Class),
         Call(Attr(Var(Name(json), $type=1.builtin.JSONObject), Name(__get__),
          $type=1.builtin.JSONObject.__get__), Attr(Var(Name(f),
           $type=1.reflect.Field), Name(name), $type=1.builtin.String),
         $type=1.builtin.JSONObject), $type=1.builtin.Object),
       $type=1.builtin.void)))),
    Return(Var(Name(result), $type=1.builtin.Object)))),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('io.datawire.quark.runtime.JSONObject')), NativeCase(py,
      Fixed('_JSONObject')), NativeCase(js, Fixed('_qrt.JSONObject')))),
   Name(JSONObject),

   ConstructorMacro(Name(JSONObject), Native(NativeCase(java,
      Fixed('new io.datawire.quark.runtime.JSONObject()')), NativeCase(py,
      Fixed('_JSONObject()')), NativeCase(js,
      Fixed('new _qrt.JSONObject()')))),

   MethodMacro(Type(Name(String)), Name(__to_String), Call(Attr(Var(Name(self),
      $type=1.builtin.JSONObject), Name(getString),
     $type=1.builtin.JSONObject.getString), $type=1.builtin.String)),

   MethodMacro(Type(Name(float)), Name(__to_float), Call(Attr(Var(Name(self),
      $type=1.builtin.JSONObject), Name(getNumber),
     $type=1.builtin.JSONObject.getNumber), $type=1.builtin.float)),

   MethodMacro(Type(Name(int)), Name(__to_int), Native(NativeCase(java,
      Fixed('((int) Math.round(('), Var(Name(self),
      $type=1.builtin.JSONObject), Fixed(').getNumber()))')), NativeCase(py,
      Fixed('int(round(('), Var(Name(self), $type=1.builtin.JSONObject),
      Fixed(').getNumber()))')), NativeCase(js, Fixed('Math.round(('),
      Var(Name(self), $type=1.builtin.JSONObject), Fixed(').getNumber())')))),

   MethodMacro(Type(Name(long)), Name(__to_long),
    Call(Attr(Call(Attr(Var(Name(self), $type=1.builtin.JSONObject),
        Name(getNumber), $type=1.builtin.JSONObject.getNumber),
      $type=1.builtin.float), Name(round), $type=1.builtin.float.round),
    $type=1.builtin.long)),

   MethodMacro(Type(Name(bool)), Name(__to_bool), Call(Attr(Var(Name(self),
      $type=1.builtin.JSONObject), Name(getBool),
     $type=1.builtin.JSONObject.getBool), $type=1.builtin.bool)),

   Method(static=False, Type(Name(String)), Name(getType)),

   Method(static=False, Type(Name(JSONObject)), Name(getObjectItem),
    Param(Type(Name(String)), Name(key), $type=1.builtin.String)),

   MethodMacro(Type(Name(JSONObject)), Name(__get__),
    Param(Type(Name(String)), Name(key), $type=1.builtin.String),
    Native(NativeCase(Fixed('('), Var(Name(self), $type=1.builtin.JSONObject),
      Fixed(').getObjectItem('), Var(Name(key), $type=1.builtin.String),
      Fixed(')')))),

   Method(static=False, Type(Name(JSONObject)), Name(getListItem),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int)),

   Method(static=False, Type(Name(int)), Name(size)),

   Method(static=False, Type(Name(String)), Name(getString)),

   Method(static=False, Type(Name(bool)), Name(isString)),

   Method(static=False, Type(Name(float)), Name(getNumber)),

   Method(static=False, Type(Name(bool)), Name(isNumber)),

   Method(static=False, Type(Name(bool)), Name(getBool)),

   Method(static=False, Type(Name(bool)), Name(isNull)),

   Method(static=False, Type(Name(bool)), Name(isDefined)),

   Method(static=False, Type(Name(bool)), Name(isUndefined)),

   Method(static=False, Type(Name(JSONObject)), Name(undefined)),

   Method(static=False, Type(Name(String)), Name(toString)),

   Method(static=False, Type(Name(JSONObject)), Name(setString),
    Param(Type(Name(String)), Name(value), $type=1.builtin.String)),

   Method(static=False, Type(Name(JSONObject)), Name(setNumber),
    Param(Type(Name(Object)), Name(value), $type=1.builtin.Object)),

   Method(static=False, Type(Name(JSONObject)), Name(setBool),
    Param(Type(Name(bool)), Name(value), $type=1.builtin.bool)),

   Method(static=False, Type(Name(JSONObject)), Name(setNull)),

   Method(static=False, Type(Name(JSONObject)), Name(setObject)),

   Method(static=False, Type(Name(JSONObject)), Name(setList)),

   Method(static=False, Type(Name(JSONObject)), Name(setObjectItem),
    Param(Type(Name(String)), Name(key), $type=1.builtin.String),
    Param(Type(Name(JSONObject)), Name(value), $type=1.builtin.JSONObject)),

   Method(static=False, Type(Name(JSONObject)), Name(setListItem),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int),
    Param(Type(Name(JSONObject)), Name(value), $type=1.builtin.JSONObject)),

   MethodMacro(Type(Name(void)), Name(__set__),
    Param(Type(Name(String)), Name(key), $type=1.builtin.String),
    Param(Type(Name(JSONObject)), Name(value), $type=1.builtin.JSONObject),
    Native(NativeCase(Fixed('('), Var(Name(self), $type=1.builtin.JSONObject),
      Fixed(').setObjectItem(('), Var(Name(key), $type=1.builtin.String),
      Fixed('), ('), Var(Name(value), $type=1.builtin.JSONObject),
      Fixed('))'))))),

  Macro(Type(Name(void)), Name(print),
   Param(Type(Name(Object)), Name(msg), $type=1.builtin.Object),
   Native(NativeCase(java,
     Fixed('do'), Fixed('{'), Fixed('System.out.println('), Var(Name(msg),
     $type=1.builtin.Object), Fixed(');System.out.flush();'), Fixed('}'),
     Fixed('while(false)')), NativeCase(py, Fixed('_println('), Var(Name(msg),
     $type=1.builtin.Object), Fixed(')')), NativeCase(js, Fixed('_qrt.print('),
     Var(Name(msg), $type=1.builtin.Object), Fixed(')')))),

  Macro(Type(Name(long)), Name(now), Native(NativeCase(java,
     Fixed('System.currentTimeMillis()')), NativeCase(py,
     Fixed('long(time.time()*1000)')), NativeCase(js, Fixed('Date.now()')))),

  Macro(Type(Name(void)), Name(sleep),
   Param(Type(Name(float)), Name(seconds), $type=1.builtin.float),
   Native(NativeCase(java,
     Fixed('io.datawire.quark.runtime.Builtins.sleep('), Var(Name(seconds),
     $type=1.builtin.float), Fixed(')')), NativeCase(py, Fixed('time.sleep('),
     Var(Name(seconds), $type=1.builtin.float), Fixed(')')), NativeCase(js,
     Fixed('_qrt.sleep('), Var(Name(seconds), $type=1.builtin.float),
     Fixed(')')))),

  Macro(Type(Name(String)), Name(url_get),
   Param(Type(Name(String)), Name(url), $type=1.builtin.String),
   Native(NativeCase(java,
     Fixed('io.datawire.quark.runtime.Builtins.url_get('), Var(Name(url),
     $type=1.builtin.String), Fixed(')')), NativeCase(py, Fixed('_url_get('),
     Var(Name(url), $type=1.builtin.String), Fixed(')')), NativeCase(js,
     Fixed('_qrt.url_get('), Var(Name(url), $type=1.builtin.String),
     Fixed(')')))),

  Macro(Type(Name(int)), Name(parseInt),
   Param(Type(Name(String)), Name(st), $type=1.builtin.String),
   Native(NativeCase(java,
     Fixed('Integer.parseInt('), Var(Name(st), $type=1.builtin.String),
     Fixed(')')), NativeCase(py, Fixed('int('), Var(Name(st),
     $type=1.builtin.String), Fixed(')')), NativeCase(js, Fixed('parseInt('),
     Var(Name(st), $type=1.builtin.String), Fixed(')')))),

  Macro(Type(Name(Codec)), Name(defaultCodec), Native(NativeCase(java,
     Fixed('io.datawire.quark.runtime.Builtins.defaultCodec()')),
    NativeCase(py, Fixed('_default_codec()')), NativeCase(js,
     Fixed('_qrt.defaultCodec()')))),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('io.datawire.quark.runtime.WSHandler')))), Name(WSHandler),

   Method(static=False, Type(Name(void)), Name(onWSInit),
    Param(Type(Name(WebSocket)), Name(socket), $type=1.builtin.WebSocket),
    Block()),

   Method(static=False, Type(Name(void)), Name(onWSConnected),
    Param(Type(Name(WebSocket)), Name(socket), $type=1.builtin.WebSocket),
    Block()),

   Method(static=False, Type(Name(void)), Name(onWSMessage),
    Param(Type(Name(WebSocket)), Name(socket), $type=1.builtin.WebSocket),
    Param(Type(Name(String)), Name(message), $type=1.builtin.String),
    Block()),

   Method(static=False, Type(Name(void)), Name(onWSBinary),
    Param(Type(Name(WebSocket)), Name(socket), $type=1.builtin.WebSocket),
    Param(Type(Name(Buffer)), Name(message), $type=1.builtin.Buffer),
    Block()),

   Method(static=False, Type(Name(void)), Name(onWSClosed),
    Param(Type(Name(WebSocket)), Name(socket), $type=1.builtin.WebSocket),
    Block()),

   Method(static=False, Type(Name(void)), Name(onWSError),
    Param(Type(Name(WebSocket)), Name(socket), $type=1.builtin.WebSocket),
    Block()),

   Method(static=False, Type(Name(void)), Name(onWSFinal),
    Param(Type(Name(WebSocket)), Name(socket), $type=1.builtin.WebSocket),
    Block())),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('io.datawire.quark.runtime.WebSocket')))), Name(WebSocket),

   Method(static=False, Type(Name(bool)), Name(send),
    Param(Type(Name(String)), Name(message), $type=1.builtin.String)),

   Method(static=False, Type(Name(bool)), Name(sendBinary),
    Param(Type(Name(Buffer)), Name(bytes), $type=1.builtin.Buffer)),

   Method(static=False, Type(Name(bool)), Name(close))),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('io.datawire.quark.runtime.HTTPHandler')))), Name(HTTPHandler),

   Method(static=False, Type(Name(void)), Name(onHTTPInit),
    Param(Type(Name(HTTPRequest)), Name(request), $type=1.builtin.HTTPRequest),
    Block()),

   Method(static=False, Type(Name(void)), Name(onHTTPResponse),
    Param(Type(Name(HTTPRequest)), Name(request), $type=1.builtin.HTTPRequest),
    Param(Type(Name(HTTPResponse)), Name(response),
    $type=1.builtin.HTTPResponse),
    Block()),

   Method(static=False, Type(Name(void)), Name(onHTTPError),
    Param(Type(Name(HTTPRequest)), Name(request), $type=1.builtin.HTTPRequest),
    Param(Type(Name(String)), Name(message), $type=1.builtin.String),
    Block()),

   Method(static=False, Type(Name(void)), Name(onHTTPFinal),
    Param(Type(Name(HTTPRequest)), Name(request), $type=1.builtin.HTTPRequest),
    Block())),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('io.datawire.quark.runtime.HTTPRequest')))), Name(HTTPRequest),

   ConstructorMacro(Name(HTTPRequest),
    Param(Type(Name(String)), Name(url), $type=1.builtin.String),
    Native(NativeCase(java,
      Fixed('new io.datawire.quark.runtime.ClientHTTPRequest('), Var(Name(url),
      $type=1.builtin.String), Fixed(')')), NativeCase(py,
      Fixed('_HTTPRequest('), Var(Name(url), $type=1.builtin.String),
      Fixed(')')), NativeCase(js, Fixed('new _qrt.HTTPRequest('),
      Var(Name(url), $type=1.builtin.String), Fixed(')')))),

   Method(static=False, Type(Name(String)), Name(getUrl)),

   Method(static=False, Type(Name(void)), Name(setMethod),
    Param(Type(Name(String)), Name(method), $type=1.builtin.String)),

   Method(static=False, Type(Name(String)), Name(getMethod)),

   Method(static=False, Type(Name(void)), Name(setBody),
    Param(Type(Name(String)), Name(data), $type=1.builtin.String)),

   Method(static=False, Type(Name(String)), Name(getBody)),

   Method(static=False, Type(Name(void)), Name(setHeader),
    Param(Type(Name(String)), Name(key), $type=1.builtin.String),
    Param(Type(Name(String)), Name(value), $type=1.builtin.String)),

   Method(static=False, Type(Name(String)), Name(getHeader),
    Param(Type(Name(String)), Name(key), $type=1.builtin.String)),

   Method(static=False, Type(Name(List), Type(Name(String))),
    Name(getHeaders))),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('io.datawire.quark.runtime.HTTPResponse')))), Name(HTTPResponse),

   Method(static=False, Type(Name(int)), Name(getCode)),

   Method(static=False, Type(Name(void)), Name(setCode),
    Param(Type(Name(int)), Name(code), $type=1.builtin.int)),

   Method(static=False, Type(Name(String)), Name(getBody)),

   Method(static=False, Type(Name(void)), Name(setBody),
    Param(Type(Name(String)), Name(body), $type=1.builtin.String)),

   Method(static=False, Type(Name(void)), Name(setHeader),
    Param(Type(Name(String)), Name(key), $type=1.builtin.String),
    Param(Type(Name(String)), Name(value), $type=1.builtin.String)),

   Method(static=False, Type(Name(String)), Name(getHeader),
    Param(Type(Name(String)), Name(key), $type=1.builtin.String)),

   Method(static=False, Type(Name(List), Type(Name(String))),
    Name(getHeaders))),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('io.datawire.quark.runtime.Task')))), Name(Task),

   Method(static=False, Type(Name(void)), Name(onExecute),
    Param(Type(Name(Runtime)), Name(runtime), $type=1.builtin.Runtime))),

  Primitive(Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('io.datawire.quark.runtime.Runtime')))), Name(Runtime),

   Method(static=False, Type(Name(void)), Name(acquire)),

   Method(static=False, Type(Name(void)), Name(release)),

   Method(static=False, Type(Name(void)), Name(wait),
    Param(Type(Name(float)), Name(timeoutInSeconds), $type=1.builtin.float)),

   Method(static=False, Type(Name(void)), Name(open),
    Param(Type(Name(String)), Name(url), $type=1.builtin.String),
    Param(Type(Name(WSHandler)), Name(handler), $type=1.builtin.WSHandler)),

   Method(static=False, Type(Name(void)), Name(request),
    Param(Type(Name(HTTPRequest)), Name(request), $type=1.builtin.HTTPRequest),
    Param(Type(Name(HTTPHandler)), Name(handler),
    $type=1.builtin.HTTPHandler)),

   Method(static=False, Type(Name(void)), Name(schedule),
    Param(Type(Name(Task)), Name(handler), $type=1.builtin.Task),
    Param(Type(Name(float)), Name(delayInSeconds), $type=1.builtin.float)),

   Method(static=False, Type(Name(Codec)), Name(codec)),

   Method(static=False, Type(Name(void)), Name(serveHTTP),
    Param(Type(Name(String)), Name(url), $type=1.builtin.String),
    Param(Type(Name(HTTPServlet)), Name(servlet),
    $type=1.builtin.HTTPServlet)),

   Method(static=False, Type(Name(void)), Name(serveWS),
    Param(Type(Name(String)), Name(url), $type=1.builtin.String),
    Param(Type(Name(WSServlet)), Name(servlet), $type=1.builtin.WSServlet)),

   Method(static=False, Type(Name(void)), Name(respond),
    Param(Type(Name(HTTPRequest)), Name(request), $type=1.builtin.HTTPRequest),
    Param(Type(Name(HTTPResponse)), Name(response),
    $type=1.builtin.HTTPResponse)),

   Method(static=False, Annotation(Name(doc),
     String("Display the explanatory message and then terminate the program",
     $type=1.builtin.String)), Type(Name(void)), Name(fail),
    Param(Type(Name(String)), Name(message), $type=1.builtin.String))),

  Primitive(Annotation(Name(doc),
    String("A stateless buffer of bytes. Default byte order is network byte order.",
    $type=1.builtin.String)), Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('io.datawire.quark.runtime.Buffer')))), Name(Buffer),

   Method(static=False, Annotation(Name(doc), String("capacity of the buffer",
     $type=1.builtin.String)), Type(Name(int)), Name(capacity)),

   Method(static=False, Annotation(Name(doc),
     String("read a byte at the specified index", $type=1.builtin.String)),
    Type(Name(byte)), Name(getByte),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int)),

   Method(static=False, Annotation(Name(doc),
     String("write a byte at the specified index", $type=1.builtin.String)),
    Type(Name(void)), Name(putByte),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int),
    Param(Type(Name(byte)), Name(value), $type=1.builtin.byte)),

   Method(static=False, Annotation(Name(doc),
     String("read a short at the specified index", $type=1.builtin.String)),
    Type(Name(short)), Name(getShort),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int)),

   Method(static=False, Annotation(Name(doc),
     String("write a short at the specified index", $type=1.builtin.String)),
    Type(Name(void)), Name(putShort),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int),
    Param(Type(Name(short)), Name(value), $type=1.builtin.short)),

   Method(static=False, Annotation(Name(doc),
     String("read an int at the specified index", $type=1.builtin.String)),
    Type(Name(int)), Name(getInt),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int)),

   Method(static=False, Annotation(Name(doc),
     String("write an int at the specified index", $type=1.builtin.String)),
    Type(Name(void)), Name(putInt),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int),
    Param(Type(Name(int)), Name(value), $type=1.builtin.int)),

   Method(static=False, Annotation(Name(doc),
     String("read a long at the specified index", $type=1.builtin.String)),
    Type(Name(long)), Name(getLong),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int)),

   Method(static=False, Annotation(Name(doc),
     String("write a long at the specified index", $type=1.builtin.String)),
    Type(Name(void)), Name(putLong),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int),
    Param(Type(Name(long)), Name(value), $type=1.builtin.long)),

   Method(static=False, Annotation(Name(doc),
     String("read a float at the specified index", $type=1.builtin.String)),
    Type(Name(float)), Name(getFloat),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int)),

   Method(static=False, Annotation(Name(doc),
     String("write a float at the specified index", $type=1.builtin.String)),
    Type(Name(void)), Name(putFloat),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int),
    Param(Type(Name(float)), Name(value), $type=1.builtin.float)),

   Method(static=False, Annotation(Name(doc),
     String("decode length bytes as a UTF8 string at the specified index",
     $type=1.builtin.String)), Type(Name(String)), Name(getStringUTF8),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int),
    Param(Type(Name(int)), Name(length), $type=1.builtin.int)),

   Method(static=False, Annotation(Name(doc),
     String("write a string encoded in UTF8 at the specified index and return encoded length",
     $type=1.builtin.String)), Type(Name(int)), Name(putStringUTF8),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int),
    Param(Type(Name(String)), Name(value), $type=1.builtin.String)),

   Method(static=False, Annotation(Name(doc), String("get a view of the range",
     $type=1.builtin.String)), Type(Name(Buffer)), Name(getSlice),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int),
    Param(Type(Name(int)), Name(length), $type=1.builtin.int)),

   Method(static=False, Annotation(Name(doc),
     String("copy length bytes from the source buffer starting at offset to the specified index",
     $type=1.builtin.String)), Type(Name(void)), Name(putSlice),
    Param(Type(Name(int)), Name(index), $type=1.builtin.int),
    Param(Type(Name(Buffer)), Name(source), $type=1.builtin.Buffer),
    Param(Type(Name(int)), Name(offset), $type=1.builtin.int),
    Param(Type(Name(int)), Name(length), $type=1.builtin.int)),

   Method(static=False, Annotation(Name(doc),
     String("get a littleEndian view of the same buffer",
     $type=1.builtin.String)), Type(Name(Buffer)), Name(littleEndian)),

   Method(static=False, Annotation(Name(doc),
     String("true if the buffer decodes in network byte order",
     $type=1.builtin.String)), Type(Name(bool)), Name(isNetworkByteOrder))),

  Primitive(Annotation(Name(doc),
    String("Various String and Buffer conversion routines",
    $type=1.builtin.String)), Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('io.datawire.quark.runtime.Codec')))), Name(Codec),

   Method(static=False, Annotation(Name(doc),
     String("Create an empty buffer with the specified capacity",
     $type=1.builtin.String)), Type(Name(Buffer)), Name(buffer),
    Param(Type(Name(int)), Name(capacity), $type=1.builtin.int)),

   Method(static=False, Annotation(Name(doc),
     String("Encode the specified slice of the buffer and insert a space every 2^spaceScale bytes",
     $type=1.builtin.String)), Type(Name(String)), Name(toHexdump),
    Param(Type(Name(Buffer)), Name(buffer), $type=1.builtin.Buffer),
    Param(Type(Name(int)), Name(offeset), $type=1.builtin.int),
    Param(Type(Name(int)), Name(length), $type=1.builtin.int),
    Param(Type(Name(int)), Name(spaceScale), $type=1.builtin.int)),

   Method(static=False, Annotation(Name(doc),
     String("decode the hexdump ignoring leading 0x and any intervening spaces",
     $type=1.builtin.String)), Type(Name(Buffer)), Name(fromHexdump),
    Param(Type(Name(String)), Name(hex), $type=1.builtin.String)),

   Method(static=False, Annotation(Name(doc),
     String("Encode the specified slice of the buffer as Base64",
     $type=1.builtin.String)), Type(Name(String)), Name(toBase64),
    Param(Type(Name(Buffer)), Name(buffer), $type=1.builtin.Buffer),
    Param(Type(Name(int)), Name(offset), $type=1.builtin.int),
    Param(Type(Name(int)), Name(length), $type=1.builtin.int)),

   Method(static=False, Annotation(Name(doc),
     String("decode the Base64 enccoded string", $type=1.builtin.String)),
    Type(Name(Buffer)), Name(fromBase64),
    Param(Type(Name(String)), Name(base64), $type=1.builtin.String))),

  Primitive(Annotation(Name(doc), String("A service addresable with an url",
    $type=1.builtin.String)), Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('io.datawire.quark.runtime.Servlet')))), Name(Servlet),

   Method(static=False, Annotation(Name(doc),
     String("called after the servlet is successfully installed. The url will be the actual url used, important especially if ephemeral port was requested",
     $type=1.builtin.String)), Type(Name(void)), Name(onServletInit),
    Param(Type(Name(String)), Name(url), $type=1.builtin.String),
    Param(Type(Name(Runtime)), Name(runtime), $type=1.builtin.Runtime),
    Block()),

   Method(static=False, Annotation(Name(doc),
     String("called if the servlet could not be installed",
     $type=1.builtin.String)), Type(Name(void)), Name(onServletError),
    Param(Type(Name(String)), Name(url), $type=1.builtin.String),
    Param(Type(Name(String)), Name(error), $type=1.builtin.String),
    Block()),

   Method(static=False, Annotation(Name(doc),
     String("called when the servlet is removed", $type=1.builtin.String)),
    Type(Name(void)), Name(onServletEnd),
    Param(Type(Name(String)), Name(url), $type=1.builtin.String),
    Block())),

  Primitive(Annotation(Name(doc), String("Http servlet",
    $type=1.builtin.String)), Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('io.datawire.quark.runtime.HTTPServlet')))), Name(HTTPServlet),
   Type(Name(Servlet)),

   Method(static=False, Annotation(Name(doc),
     String("incoming request. respond with Runtime.respond(). After responding the objects may get recycled by the runtime",
     $type=1.builtin.String)), Type(Name(void)), Name(onHTTPRequest),
    Param(Type(Name(HTTPRequest)), Name(request), $type=1.builtin.HTTPRequest),
    Param(Type(Name(HTTPResponse)), Name(response),
    $type=1.builtin.HTTPResponse),
    Block())),

  Primitive(Annotation(Name(doc), String("Websocket servlet",
    $type=1.builtin.String)), Annotation(Name(mapping), Native(NativeCase(java,
      Fixed('io.datawire.quark.runtime.WSServlet')))), Name(WSServlet),
   Type(Name(Servlet)),

   Method(static=False, Annotation(Name(doc),
     String("called for each new incoming WebSocket connection",
     $type=1.builtin.String)), Type(Name(WSHandler)), Name(onWSConnect),
    Param(Type(Name(HTTPRequest)), Name(upgrade_request),
    $type=1.builtin.HTTPRequest),
    Block(
     Return(Null(null, $type=1.builtin.Object))))),

  Class(Name(ResponseHolder), Type(Name(HTTPHandler)),
   Field(static=False, Type(Name(HTTPResponse)), Name(response),
   $type=1.builtin.HTTPResponse),
   Field(static=False, Type(Name(String)), Name(failure), Null(null,
    $type=1.builtin.Object), $type=1.builtin.String),

   Method(static=False, Type(Name(void)), Name(onHTTPResponse),
    Param(Type(Name(HTTPRequest)), Name(request), $type=1.builtin.HTTPRequest),
    Param(Type(Name(HTTPResponse)), Name(response),
    $type=1.builtin.HTTPResponse),
    Block(
     Assign(Attr(Var(Name(self), $type=1.builtin.ResponseHolder),
       Name(response), $type=1.builtin.HTTPResponse), Var(Name(response),
      $type=1.builtin.HTTPResponse)))),

   Method(static=False, Type(Name(void)), Name(onHTTPError),
    Param(Type(Name(HTTPRequest)), Name(request), $type=1.builtin.HTTPRequest),
    Param(Type(Name(String)), Name(message), $type=1.builtin.String),
    Block(
     Assign(Var(Name(failure), $type=1.builtin.String), Var(Name(message),
      $type=1.builtin.String)))),

   Method(static=False, Type(Name(String)), Name(_getClass), Block(
     Return(String("builtin.ResponseHolder", $type=1.builtin.String)))),

   Method(static=False, Type(Name(Object)), Name(_getField),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Block(
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("response",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.builtin.ResponseHolder),
         Name(response), $type=1.builtin.HTTPResponse)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("failure",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.builtin.ResponseHolder),
         Name(failure), $type=1.builtin.String)))),
     Return(Null(null, $type=1.builtin.Object)))),

   Method(static=False, Type(Name(void)), Name(_setField),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Param(Type(Name(Object)), Name(value), $type=1.builtin.Object),
    Block(
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("response",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.builtin.ResponseHolder),
         Name(response), $type=1.builtin.HTTPResponse), Cast(Var(Name(value),
         $type=1.builtin.Object), $type=1.builtin.HTTPResponse)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("failure",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.builtin.ResponseHolder),
         Name(failure), $type=1.builtin.String), Cast(Var(Name(value),
         $type=1.builtin.Object), $type=1.builtin.String)))))),
   Field(static=True, Type(Name(reflect), Name(Class)),
    Name(builtin_ResponseHolder_ref), Attr(Attr(Var(Name(empty_md),
      $type=2.empty_md), Name(Root), $type=2.empty_md.Root),
     Name(builtin_ResponseHolder_md), $type=1.reflect.Class),
   $type=1.reflect.Class)),

  Interface(Name(Service),

   Method(static=False, Type(Name(String)), Name(getURL)),

   Method(static=False, Type(Name(Runtime)), Name(getRuntime)),

   Method(static=False, Type(Name(long)), Name(getTimeout)),

   Method(static=False, Type(Name(Object)), Name(rpc),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Param(Type(Name(Object)), Name(message), $type=1.builtin.Object),
    Param(Type(Name(List), Type(Name(Object))), Name(options),
    $type=1.builtin.List<1.builtin.Object>),
    Block(
     Local(
      Declaration(Type(Name(HTTPRequest)), Name(request),
       Call(Type(Name(HTTPRequest)), Call(Var(Name(getURL),
         $type=1.builtin.Service.getURL), $type=1.builtin.String),
       $type=1.builtin.HTTPRequest), $type=1.builtin.HTTPRequest)),
     Local(
      Declaration(Type(Name(JSONObject)), Name(json), Call(Var(Name(toJSON),
        $type=1.builtin.toJSON), Var(Name(message), $type=1.builtin.Object),
       $type=1.builtin.JSONObject), $type=1.builtin.JSONObject)),
     Local(
      Declaration(Type(Name(JSONObject)), Name(envelope),
       Call(Type(Name(JSONObject)), $type=1.builtin.JSONObject),
      $type=1.builtin.JSONObject)),
     ExprStmt(Call(Attr(Var(Name(envelope), $type=1.builtin.JSONObject),
        Name(__set__), $type=1.builtin.JSONObject.__set__), String("$method",
       $type=1.builtin.String), Var(Name(name), $type=1.builtin.String),
      $type=1.builtin.void)),
     ExprStmt(Call(Attr(Var(Name(envelope), $type=1.builtin.JSONObject),
        Name(__set__), $type=1.builtin.JSONObject.__set__), String("rpc",
       $type=1.builtin.String), Var(Name(json), $type=1.builtin.JSONObject),
      $type=1.builtin.void)),
     ExprStmt(Call(Attr(Var(Name(request), $type=1.builtin.HTTPRequest),
        Name(setBody), $type=1.builtin.HTTPRequest.setBody),
       Call(Attr(Var(Name(envelope), $type=1.builtin.JSONObject),
         Name(toString), $type=1.builtin.JSONObject.toString),
       $type=1.builtin.String), $type=1.builtin.void)),
     ExprStmt(Call(Attr(Var(Name(request), $type=1.builtin.HTTPRequest),
        Name(setMethod), $type=1.builtin.HTTPRequest.setMethod), String("POST",
       $type=1.builtin.String), $type=1.builtin.void)),
     Local(
      Declaration(Type(Name(Runtime)), Name(rt), Call(Attr(Var(Name(self),
         $type=1.builtin.Service), Name(getRuntime),
        $type=1.builtin.Service.getRuntime), $type=1.builtin.Runtime),
      $type=1.builtin.Runtime)),
     Local(
      Declaration(Type(Name(long)), Name(timeout), Call(Var(Name(getTimeout),
        $type=1.builtin.Service.getTimeout), $type=1.builtin.long),
      $type=1.builtin.long)),
     If(Call(Attr(Call(Attr(Var(Name(options),
          $type=1.builtin.List<1.builtin.Object>), Name(size),
         $type=1.builtin.List.size), $type=1.builtin.int), Name(__gt__),
       $type=1.builtin.numeric.__gt__), Number(0, $type=1.builtin.int),
      $type=1.builtin.bool), Block(
       Local(
        Declaration(Type(Name(Map), Type(Name(String)), Type(Name(Object))),
         Name(map), Cast(Call(Attr(Var(Name(options),
            $type=1.builtin.List<1.builtin.Object>), Name(__get__),
           $type=1.builtin.List.__get__), Number(0, $type=1.builtin.int),
          $type=1.builtin.Object),
         $type=1.builtin.Map<1.builtin.String,1.builtin.Object>),
        $type=1.builtin.Map<1.builtin.String,1.builtin.Object>)),
       Local(
        Declaration(Type(Name(int)), Name(override),
         Cast(Call(Attr(Var(Name(map),
            $type=1.builtin.Map<1.builtin.String,1.builtin.Object>),
            Name(__get__), $type=1.builtin.Map.__get__), String("timeout",
           $type=1.builtin.String), $type=1.builtin.Object),
         $type=1.builtin.int), $type=1.builtin.int)),
       If(Call(Attr(Var(Name(override), $type=1.builtin.int), Name(__ne__),
         $type=1.builtin.Object.__ne__), Null(null, $type=1.builtin.Object),
        $type=1.builtin.bool), Block(
         Assign(Var(Name(timeout), $type=1.builtin.long), Var(Name(override),
          $type=1.builtin.int)))))),
     Local(
      Declaration(Type(Name(ResponseHolder)), Name(rh),
       Call(Type(Name(ResponseHolder)), $type=1.builtin.ResponseHolder),
      $type=1.builtin.ResponseHolder)),
     ExprStmt(Call(Attr(Var(Name(rt), $type=1.builtin.Runtime), Name(acquire),
       $type=1.builtin.Runtime.acquire), $type=1.builtin.void)),
     Local(
      Declaration(Type(Name(long)), Name(start), Call(Var(Name(now),
        $type=1.builtin.now), $type=1.builtin.long), $type=1.builtin.long)),
     Local(
      Declaration(Type(Name(long)), Name(deadline), Call(Attr(Var(Name(start),
         $type=1.builtin.long), Name(__add__),
        $type=1.builtin.numeric.__add__), Var(Name(timeout),
        $type=1.builtin.long), $type=1.builtin.long), $type=1.builtin.long)),
     ExprStmt(Call(Attr(Var(Name(rt), $type=1.builtin.Runtime), Name(request),
       $type=1.builtin.Runtime.request), Var(Name(request),
       $type=1.builtin.HTTPRequest), Var(Name(rh),
       $type=1.builtin.ResponseHolder), $type=1.builtin.void)),
     While(Bool(true, $type=1.builtin.bool), Block(
       Local(
        Declaration(Type(Name(long)), Name(remaining),
         Call(Attr(Var(Name(deadline), $type=1.builtin.long), Name(__sub__),
          $type=1.builtin.numeric.__sub__), Call(Var(Name(now),
           $type=1.builtin.now), $type=1.builtin.long), $type=1.builtin.long),
        $type=1.builtin.long)),
       If(Call(Attr(Call(Attr(Attr(Var(Name(rh),
             $type=1.builtin.ResponseHolder), Name(response),
            $type=1.builtin.HTTPResponse), Name(__eq__),
           $type=1.builtin.Object.__eq__), Null(null, $type=1.builtin.Object),
          $type=1.builtin.bool), Name(__and__), $type=1.builtin.bool.__and__),
         Call(Attr(Attr(Var(Name(rh), $type=1.builtin.ResponseHolder),
            Name(failure), $type=1.builtin.String), Name(__eq__),
          $type=1.builtin.Object.__eq__), Null(null, $type=1.builtin.Object),
         $type=1.builtin.bool), $type=1.builtin.bool), Block(
         If(Call(Attr(Call(Attr(Var(Name(timeout), $type=1.builtin.long),
              Name(__ne__), $type=1.builtin.Object.__ne__), Number(0,
             $type=1.builtin.int), $type=1.builtin.bool), Name(__and__),
           $type=1.builtin.bool.__and__), Call(Attr(Var(Name(remaining),
             $type=1.builtin.long), Name(__le__),
            $type=1.builtin.numeric.__le__), Number(0, $type=1.builtin.int),
           $type=1.builtin.bool), $type=1.builtin.bool), Block(
           Break()))), Block(
         Break())),
       If(Call(Attr(Var(Name(timeout), $type=1.builtin.long), Name(__eq__),
         $type=1.builtin.Object.__eq__), Number(0, $type=1.builtin.int),
        $type=1.builtin.bool), Block(
         ExprStmt(Call(Attr(Var(Name(rt), $type=1.builtin.Runtime), Name(wait),
           $type=1.builtin.Runtime.wait), Number(3.14, $type=1.builtin.float),
          $type=1.builtin.void))), Block(
         Local(
          Declaration(Type(Name(float)), Name(r),
           Call(Attr(Var(Name(remaining), $type=1.builtin.long), Name(toFloat),
            $type=1.builtin.integral.toFloat), $type=1.builtin.float),
          $type=1.builtin.float)),
         ExprStmt(Call(Attr(Var(Name(rt), $type=1.builtin.Runtime), Name(wait),
           $type=1.builtin.Runtime.wait), Call(Attr(Var(Name(r),
             $type=1.builtin.float), Name(__div__),
            $type=1.builtin.float.__div__), Number(1000.0,
            $type=1.builtin.float), $type=1.builtin.float),
          $type=1.builtin.void)))))),
     ExprStmt(Call(Attr(Var(Name(rt), $type=1.builtin.Runtime), Name(release),
       $type=1.builtin.Runtime.release), $type=1.builtin.void)),
     If(Call(Attr(Attr(Var(Name(rh), $type=1.builtin.ResponseHolder),
         Name(failure), $type=1.builtin.String), Name(__ne__),
       $type=1.builtin.Object.__ne__), Null(null, $type=1.builtin.Object),
      $type=1.builtin.bool), Block(
       ExprStmt(Call(Attr(Var(Name(rt), $type=1.builtin.Runtime), Name(fail),
         $type=1.builtin.Runtime.fail),
         Call(Attr(Call(Attr(Call(Attr(String("RPC ", $type=1.builtin.String),
               Name(__add__), $type=1.builtin.String.__add__), Var(Name(name),
              $type=1.builtin.String), $type=1.builtin.String), Name(__add__),
            $type=1.builtin.String.__add__), String("(...) failed: ",
            $type=1.builtin.String), $type=1.builtin.String), Name(__add__),
          $type=1.builtin.String.__add__), Attr(Var(Name(rh),
           $type=1.builtin.ResponseHolder), Name(failure),
          $type=1.builtin.String), $type=1.builtin.String),
        $type=1.builtin.void)),
       Return(Null(null, $type=1.builtin.Object)))),
     If(Call(Attr(Attr(Var(Name(rh), $type=1.builtin.ResponseHolder),
         Name(response), $type=1.builtin.HTTPResponse), Name(__eq__),
       $type=1.builtin.Object.__eq__), Null(null, $type=1.builtin.Object),
      $type=1.builtin.bool), Block(
       Return(Null(null, $type=1.builtin.Object)))),
     Local(
      Declaration(Type(Name(HTTPResponse)), Name(response), Attr(Var(Name(rh),
        $type=1.builtin.ResponseHolder), Name(response),
       $type=1.builtin.HTTPResponse), $type=1.builtin.HTTPResponse)),
     If(Call(Attr(Call(Attr(Var(Name(response), $type=1.builtin.HTTPResponse),
          Name(getCode), $type=1.builtin.HTTPResponse.getCode),
        $type=1.builtin.int), Name(__ne__), $type=1.builtin.Object.__ne__),
       Number(200, $type=1.builtin.int), $type=1.builtin.bool), Block(
       ExprStmt(Call(Attr(Var(Name(rt), $type=1.builtin.Runtime), Name(fail),
         $type=1.builtin.Runtime.fail),
         Call(Attr(Call(Attr(Call(Attr(String("RPC ", $type=1.builtin.String),
               Name(__add__), $type=1.builtin.String.__add__), Var(Name(name),
              $type=1.builtin.String), $type=1.builtin.String), Name(__add__),
            $type=1.builtin.String.__add__),
            String("(...) failed: Server returned error ",
            $type=1.builtin.String), $type=1.builtin.String), Name(__add__),
          $type=1.builtin.String.__add__),
          Call(Attr(Call(Attr(Var(Name(response),
              $type=1.builtin.HTTPResponse), Name(getCode),
             $type=1.builtin.HTTPResponse.getCode), $type=1.builtin.int),
            Name(toString), $type=1.builtin.int.toString),
          $type=1.builtin.String), $type=1.builtin.String),
        $type=1.builtin.void)),
       Return(Null(null, $type=1.builtin.Object)))),
     Local(
      Declaration(Type(Name(String)), Name(body), Call(Attr(Var(Name(response),
         $type=1.builtin.HTTPResponse), Name(getBody),
        $type=1.builtin.HTTPResponse.getBody), $type=1.builtin.String),
      $type=1.builtin.String)),
     Local(
      Declaration(Type(Name(JSONObject)), Name(obj), Call(Attr(Var(Name(body),
         $type=1.builtin.String), Name(parseJSON),
        $type=1.builtin.String.parseJSON), $type=1.builtin.JSONObject),
      $type=1.builtin.JSONObject)),
     Local(
      Declaration(Type(Name(String)), Name(classname), Call(Attr(Var(Name(obj),
         $type=1.builtin.JSONObject), Name(__get__),
        $type=1.builtin.JSONObject.__get__), String("$class",
        $type=1.builtin.String), $type=1.builtin.JSONObject),
      $type=1.builtin.String)),
     If(Call(Attr(Var(Name(classname), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), Null(null, $type=1.builtin.Object),
      $type=1.builtin.bool), Block(
       ExprStmt(Call(Attr(Var(Name(rt), $type=1.builtin.Runtime), Name(fail),
         $type=1.builtin.Runtime.fail), Call(Attr(Call(Attr(String("RPC ",
             $type=1.builtin.String), Name(__add__),
            $type=1.builtin.String.__add__), Var(Name(name),
            $type=1.builtin.String), $type=1.builtin.String), Name(__add__),
          $type=1.builtin.String.__add__),
          String("(...) failed: Server returned unrecognizable content",
          $type=1.builtin.String), $type=1.builtin.String),
        $type=1.builtin.void)),
       Return(Null(null, $type=1.builtin.Object))), Block(
       Return(Call(Var(Name(fromJSON), $type=1.builtin.fromJSON),
         Call(Attr(Attr(Var(Name(reflect), $type=1.reflect), Name(Class),
           $type=1.reflect.Class), Name(get), $type=1.reflect.Class.get),
          Var(Name(classname), $type=1.builtin.String), $type=1.reflect.Class),
         Var(Name(obj), $type=1.builtin.JSONObject),
        $type=1.builtin.Object)))))),
   Field(static=True, Type(Name(reflect), Name(Class)),
    Name(builtin_Service_ref), Attr(Attr(Var(Name(empty_md), $type=2.empty_md),
      Name(Root), $type=2.empty_md.Root), Name(builtin_Service_md),
    $type=1.reflect.Class), $type=1.reflect.Class)),

  Class(Name(Client),
   Field(static=False, Type(Name(Runtime)), Name(runtime),
   $type=1.builtin.Runtime),
   Field(static=False, Type(Name(String)), Name(url), $type=1.builtin.String),
   Field(static=False, Type(Name(long)), Name(timeout), $type=1.builtin.long),

   Constructor(Name(Client),
    Param(Type(Name(Runtime)), Name(runtime), $type=1.builtin.Runtime),
    Param(Type(Name(String)), Name(url), $type=1.builtin.String),
    Block(
     Assign(Attr(Var(Name(self), $type=1.builtin.Client), Name(runtime),
      $type=1.builtin.Runtime), Var(Name(runtime), $type=1.builtin.Runtime)),
     Assign(Attr(Var(Name(self), $type=1.builtin.Client), Name(url),
      $type=1.builtin.String), Var(Name(url), $type=1.builtin.String)),
     Assign(Attr(Var(Name(self), $type=1.builtin.Client), Name(timeout),
      $type=1.builtin.long), Number(0, $type=1.builtin.int)))),

   Method(static=False, Type(Name(Runtime)), Name(getRuntime), Block(
     Return(Attr(Var(Name(self), $type=1.builtin.Client), Name(runtime),
      $type=1.builtin.Runtime)))),

   Method(static=False, Type(Name(String)), Name(getURL), Block(
     Return(Attr(Var(Name(self), $type=1.builtin.Client), Name(url),
      $type=1.builtin.String)))),

   Method(static=False, Type(Name(long)), Name(getTimeout), Block(
     Return(Attr(Var(Name(self), $type=1.builtin.Client), Name(timeout),
      $type=1.builtin.long)))),

   Method(static=False, Type(Name(void)), Name(setTimeout),
    Param(Type(Name(long)), Name(timeout), $type=1.builtin.long),
    Block(
     Assign(Attr(Var(Name(self), $type=1.builtin.Client), Name(timeout),
      $type=1.builtin.long), Var(Name(timeout), $type=1.builtin.long)))),

   Method(static=False, Type(Name(String)), Name(_getClass), Block(
     Return(String("builtin.Client", $type=1.builtin.String)))),

   Method(static=False, Type(Name(Object)), Name(_getField),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Block(
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("runtime",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.builtin.Client), Name(runtime),
        $type=1.builtin.Runtime)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("url", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.builtin.Client), Name(url),
        $type=1.builtin.String)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("timeout",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.builtin.Client), Name(timeout),
        $type=1.builtin.long)))),
     Return(Null(null, $type=1.builtin.Object)))),

   Method(static=False, Type(Name(void)), Name(_setField),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Param(Type(Name(Object)), Name(value), $type=1.builtin.Object),
    Block(
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("runtime",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.builtin.Client), Name(runtime),
        $type=1.builtin.Runtime), Cast(Var(Name(value),
         $type=1.builtin.Object), $type=1.builtin.Runtime)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("url", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.builtin.Client), Name(url),
        $type=1.builtin.String), Cast(Var(Name(value), $type=1.builtin.Object),
        $type=1.builtin.String)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("timeout",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.builtin.Client), Name(timeout),
        $type=1.builtin.long), Cast(Var(Name(value), $type=1.builtin.Object),
        $type=1.builtin.long)))))),
   Field(static=True, Type(Name(reflect), Name(Class)),
    Name(builtin_Client_ref), Attr(Attr(Var(Name(empty_md), $type=2.empty_md),
      Name(Root), $type=2.empty_md.Root), Name(builtin_Client_md),
    $type=1.reflect.Class), $type=1.reflect.Class)),

  Class(Name(Server), TypeParam(Name(T)), Type(Name(HTTPServlet)),
   Field(static=False, Type(Name(Runtime)), Name(runtime),
   $type=1.builtin.Runtime),
   Field(static=False, Type(Name(T)), Name(impl), $type=1.builtin.Server.T),

   Constructor(Name(Server),
    Param(Type(Name(Runtime)), Name(runtime), $type=1.builtin.Runtime),
    Param(Type(Name(T)), Name(impl), $type=1.builtin.Server.T),
    Block(
     Assign(Attr(Var(Name(self), $type=1.builtin.Server<1.builtin.Server.T>),
       Name(runtime), $type=1.builtin.Runtime), Var(Name(runtime),
      $type=1.builtin.Runtime)),
     Assign(Attr(Var(Name(self), $type=1.builtin.Server<1.builtin.Server.T>),
       Name(impl), $type=1.builtin.Server.T), Var(Name(impl),
      $type=1.builtin.Server.T)))),

   Method(static=False, Type(Name(Runtime)), Name(getRuntime), Block(
     Return(Attr(Var(Name(self), $type=1.builtin.Server<1.builtin.Server.T>),
       Name(runtime), $type=1.builtin.Runtime)))),

   Method(static=False, Type(Name(void)), Name(onHTTPRequest),
    Param(Type(Name(HTTPRequest)), Name(request), $type=1.builtin.HTTPRequest),
    Param(Type(Name(HTTPResponse)), Name(response),
    $type=1.builtin.HTTPResponse),
    Block(
     Local(
      Declaration(Type(Name(String)), Name(body), Call(Attr(Var(Name(request),
         $type=1.builtin.HTTPRequest), Name(getBody),
        $type=1.builtin.HTTPRequest.getBody), $type=1.builtin.String),
      $type=1.builtin.String)),
     Local(
      Declaration(Type(Name(JSONObject)), Name(envelope),
       Call(Attr(Var(Name(body), $type=1.builtin.String), Name(parseJSON),
        $type=1.builtin.String.parseJSON), $type=1.builtin.JSONObject),
      $type=1.builtin.JSONObject)),
     If(Call(Attr(Call(Attr(Call(Attr(Call(Attr(Var(Name(envelope),
              $type=1.builtin.JSONObject), Name(__get__),
             $type=1.builtin.JSONObject.__get__), String("$method",
             $type=1.builtin.String), $type=1.builtin.JSONObject),
            Name(__eq__), $type=1.builtin.Object.__eq__),
           Call(Attr(Var(Name(envelope), $type=1.builtin.JSONObject),
             Name(undefined), $type=1.builtin.JSONObject.undefined),
           $type=1.builtin.JSONObject), $type=1.builtin.bool), Name(__or__),
         $type=1.builtin.bool.__or__), Call(Attr(Call(Attr(Var(Name(envelope),
             $type=1.builtin.JSONObject), Name(__get__),
            $type=1.builtin.JSONObject.__get__), String("rpc",
            $type=1.builtin.String), $type=1.builtin.JSONObject), Name(__eq__),
          $type=1.builtin.Object.__eq__), Call(Attr(Var(Name(envelope),
            $type=1.builtin.JSONObject), Name(undefined),
           $type=1.builtin.JSONObject.undefined), $type=1.builtin.JSONObject),
         $type=1.builtin.bool), $type=1.builtin.bool), Name(__or__),
       $type=1.builtin.bool.__or__),
       Call(Attr(Call(Attr(Call(Attr(Var(Name(envelope),
             $type=1.builtin.JSONObject), Name(__get__),
            $type=1.builtin.JSONObject.__get__), String("rpc",
            $type=1.builtin.String), $type=1.builtin.JSONObject),
           Name(__get__), $type=1.builtin.JSONObject.__get__), String("$class",
          $type=1.builtin.String), $type=1.builtin.JSONObject), Name(__eq__),
        $type=1.builtin.Object.__eq__), Call(Attr(Call(Attr(Var(Name(envelope),
            $type=1.builtin.JSONObject), Name(__get__),
           $type=1.builtin.JSONObject.__get__), String("rpc",
           $type=1.builtin.String), $type=1.builtin.JSONObject),
          Name(undefined), $type=1.builtin.JSONObject.undefined),
        $type=1.builtin.JSONObject), $type=1.builtin.bool),
      $type=1.builtin.bool), Block(
       ExprStmt(Call(Attr(Var(Name(response), $type=1.builtin.HTTPResponse),
          Name(setBody), $type=1.builtin.HTTPResponse.setBody),
         Call(Attr(Call(Attr(String("Failed to understand request.\n\n",
             $type=1.builtin.String), Name(__add__),
            $type=1.builtin.String.__add__), Var(Name(body),
            $type=1.builtin.String), $type=1.builtin.String), Name(__add__),
          $type=1.builtin.String.__add__), String("\n",
          $type=1.builtin.String), $type=1.builtin.String),
        $type=1.builtin.void)),
       ExprStmt(Call(Attr(Var(Name(response), $type=1.builtin.HTTPResponse),
          Name(setCode), $type=1.builtin.HTTPResponse.setCode), Number(400,
         $type=1.builtin.int), $type=1.builtin.void))), Block(
       Local(
        Declaration(Type(Name(String)), Name(method),
         Call(Attr(Var(Name(envelope), $type=1.builtin.JSONObject),
           Name(__get__), $type=1.builtin.JSONObject.__get__),
          String("$method", $type=1.builtin.String),
         $type=1.builtin.JSONObject), $type=1.builtin.String)),
       Local(
        Declaration(Type(Name(JSONObject)), Name(json),
         Call(Attr(Var(Name(envelope), $type=1.builtin.JSONObject),
           Name(__get__), $type=1.builtin.JSONObject.__get__), String("rpc",
          $type=1.builtin.String), $type=1.builtin.JSONObject),
        $type=1.builtin.JSONObject)),
       Local(
        Declaration(Type(Name(Object)), Name(argument),
         Call(Var(Name(fromJSON), $type=1.builtin.fromJSON),
          Call(Attr(Attr(Var(Name(reflect), $type=1.reflect), Name(Class),
            $type=1.reflect.Class), Name(get), $type=1.reflect.Class.get),
           Call(Attr(Var(Name(json), $type=1.builtin.JSONObject),
             Name(__get__), $type=1.builtin.JSONObject.__get__),
            String("$class", $type=1.builtin.String),
           $type=1.builtin.JSONObject), $type=1.reflect.Class), Var(Name(json),
          $type=1.builtin.JSONObject), $type=1.builtin.Object),
        $type=1.builtin.Object)),
       Local(
        Declaration(Type(Name(Object)), Name(result),
         Call(Attr(Call(Attr(Call(Attr(Call(Attr(Call(Attr(Var(Name(self),
                   $type=1.builtin.Server<1.builtin.Server.T>), Name(getClass),
                  $type=1.builtin.Object.getClass), $type=1.reflect.Class),
                 Name(getField), $type=1.reflect.Class.getField),
                String("impl", $type=1.builtin.String), $type=1.reflect.Field),
               Name(getType), $type=1.reflect.Field.getType),
             $type=1.reflect.Class), Name(getMethod),
            $type=1.reflect.Class.getMethod), Var(Name(method),
            $type=1.builtin.String), $type=1.reflect.Method), Name(invoke),
          $type=1.reflect.Method.invoke), Var(Name(impl),
          $type=1.builtin.Server.T), List(Var(Name(argument),
           $type=1.builtin.Object), $type=1.builtin.List<1.builtin.Object>),
         $type=1.builtin.Object), $type=1.builtin.Object)),
       ExprStmt(Call(Attr(Var(Name(response), $type=1.builtin.HTTPResponse),
          Name(setBody), $type=1.builtin.HTTPResponse.setBody),
         Call(Attr(Call(Var(Name(toJSON), $type=1.builtin.toJSON),
            Var(Name(result), $type=1.builtin.Object),
           $type=1.builtin.JSONObject), Name(toString),
          $type=1.builtin.JSONObject.toString), $type=1.builtin.String),
        $type=1.builtin.void)),
       ExprStmt(Call(Attr(Var(Name(response), $type=1.builtin.HTTPResponse),
          Name(setCode), $type=1.builtin.HTTPResponse.setCode), Number(200,
         $type=1.builtin.int), $type=1.builtin.void)))),
     ExprStmt(Call(Attr(Call(Var(Name(getRuntime),
         $type=1.builtin.Server.getRuntime), $type=1.builtin.Runtime),
        Name(respond), $type=1.builtin.Runtime.respond), Var(Name(request),
       $type=1.builtin.HTTPRequest), Var(Name(response),
       $type=1.builtin.HTTPResponse), $type=1.builtin.void)))),

   Method(static=False, Type(Name(void)), Name(onServletError),
    Param(Type(Name(String)), Name(url), $type=1.builtin.String),
    Param(Type(Name(String)), Name(message), $type=1.builtin.String),
    Block(
     ExprStmt(Call(Attr(Call(Var(Name(getRuntime),
         $type=1.builtin.Server.getRuntime), $type=1.builtin.Runtime),
        Name(fail), $type=1.builtin.Runtime.fail),
       Call(Attr(Call(Attr(Call(Attr(String("RPC Server failed to register ",
             $type=1.builtin.String), Name(__add__),
            $type=1.builtin.String.__add__), Var(Name(url),
            $type=1.builtin.String), $type=1.builtin.String), Name(__add__),
          $type=1.builtin.String.__add__), String(" due to: ",
          $type=1.builtin.String), $type=1.builtin.String), Name(__add__),
        $type=1.builtin.String.__add__), Var(Name(message),
        $type=1.builtin.String), $type=1.builtin.String),
      $type=1.builtin.void)))),

   Method(static=False, Type(Name(String)), Name(_getClass), Block(
     Return(String("builtin.Server<Object>", $type=1.builtin.String)))),

   Method(static=False, Type(Name(Object)), Name(_getField),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Block(
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("runtime",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.builtin.Server<1.builtin.Server.T>),
         Name(runtime), $type=1.builtin.Runtime)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("impl", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.builtin.Server<1.builtin.Server.T>),
         Name(impl), $type=1.builtin.Server.T)))),
     Return(Null(null, $type=1.builtin.Object)))),

   Method(static=False, Type(Name(void)), Name(_setField),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Param(Type(Name(Object)), Name(value), $type=1.builtin.Object),
    Block(
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("runtime",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.builtin.Server<1.builtin.Server.T>),
         Name(runtime), $type=1.builtin.Runtime), Cast(Var(Name(value),
         $type=1.builtin.Object), $type=1.builtin.Runtime)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("impl", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.builtin.Server<1.builtin.Server.T>),
         Name(impl), $type=1.builtin.Server.T), Cast(Var(Name(value),
         $type=1.builtin.Object), $type=1.builtin.Server.T)))))),
   Field(static=True, Type(Name(reflect), Name(Class)),
    Name(builtin_Server_Object__ref), Attr(Attr(Var(Name(empty_md),
      $type=2.empty_md), Name(Root), $type=2.empty_md.Root),
     Name(builtin_Server_Object__md), $type=1.reflect.Class),
   $type=1.reflect.Class))),

 Package(Name(reflect),

  Class(Name(Class),
   Field(static=True, Type(Name(Map), Type(Name(String)), Type(Name(Class))),
    Name(classes), Map(,
    $type=1.builtin.Map<1.builtin.String,1.reflect.Class>),
   $type=1.builtin.Map<1.builtin.String,1.reflect.Class>),
   Field(static=True, Type(Name(Class)), Name(VOID), Call(Type(Name(Class)),
     String("builtin.void", $type=1.builtin.String), $type=1.reflect.Class),
   $type=1.reflect.Class),
   Field(static=True, Type(Name(Class)), Name(BOOL), Call(Type(Name(Class)),
     String("builtin.bool", $type=1.builtin.String), $type=1.reflect.Class),
   $type=1.reflect.Class),
   Field(static=True, Type(Name(Class)), Name(INT), Call(Type(Name(Class)),
     String("builtin.int", $type=1.builtin.String), $type=1.reflect.Class),
   $type=1.reflect.Class),
   Field(static=True, Type(Name(Class)), Name(LONG), Call(Type(Name(Class)),
     String("builtin.long", $type=1.builtin.String), $type=1.reflect.Class),
   $type=1.reflect.Class),
   Field(static=True, Type(Name(Class)), Name(STRING), Call(Type(Name(Class)),
     String("builtin.String", $type=1.builtin.String), $type=1.reflect.Class),
   $type=1.reflect.Class),

   Method(static=True, Type(Name(Class)), Name(get),
    Param(Type(Name(String)), Name(id), $type=1.builtin.String),
    Block(
     Return(Call(Attr(Var(Name(classes),
        $type=1.builtin.Map<1.builtin.String,1.reflect.Class>), Name(__get__),
       $type=1.builtin.Map.__get__), Var(Name(id), $type=1.builtin.String),
      $type=1.reflect.Class)))),
   Field(static=False, Type(Name(String)), Name(id), $type=1.builtin.String),
   Field(static=False, Type(Name(String)), Name(name), $type=1.builtin.String),
   Field(static=False, Type(Name(List), Type(Name(Class))), Name(parameters),
    List(, $type=1.builtin.List<1.reflect.Class>),
   $type=1.builtin.List<1.reflect.Class>),
   Field(static=False, Type(Name(List), Type(Name(Field))), Name(fields),
    List(, $type=1.builtin.List<1.reflect.Field>),
   $type=1.builtin.List<1.reflect.Field>),
   Field(static=False, Type(Name(List), Type(Name(Method))), Name(methods),
    List(, $type=1.builtin.List<1.reflect.Method>),
   $type=1.builtin.List<1.reflect.Method>),

   Constructor(Name(Class),
    Param(Type(Name(String)), Name(id), $type=1.builtin.String),
    Block(
     Assign(Attr(Var(Name(self), $type=1.reflect.Class), Name(id),
      $type=1.builtin.String), Var(Name(id), $type=1.builtin.String)),
     ExprStmt(Call(Attr(Var(Name(classes),
        $type=1.builtin.Map<1.builtin.String,1.reflect.Class>), Name(__set__),
       $type=1.builtin.Map.__set__), Var(Name(id), $type=1.builtin.String),
       Var(Name(self), $type=1.reflect.Class), $type=1.builtin.void)),
     Assign(Attr(Var(Name(self), $type=1.reflect.Class), Name(name),
      $type=1.builtin.String), Var(Name(id), $type=1.builtin.String)))),

   Method(static=False, Type(Name(String)), Name(getId), Block(
     Return(Var(Name(id), $type=1.builtin.String)))),

   Method(static=False, Type(Name(String)), Name(getName), Block(
     Return(Var(Name(name), $type=1.builtin.String)))),

   Method(static=False, Type(Name(List), Type(Name(Class))),
    Name(getParameters), Block(
     Return(Var(Name(parameters), $type=1.builtin.List<1.reflect.Class>)))),

   Method(static=False, Type(Name(Object)), Name(construct),
    Param(Type(Name(List), Type(Name(Object))), Name(args),
    $type=1.builtin.List<1.builtin.Object>),
    Block(
     Return(Null(null, $type=1.builtin.Object)))),

   Method(static=False, Type(Name(List), Type(Name(Field))), Name(getFields),
    Block(
     Return(Var(Name(fields), $type=1.builtin.List<1.reflect.Field>)))),

   Method(static=False, Type(Name(Field)), Name(getField),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Block(
     Local(
      Declaration(Type(Name(int)), Name(idx), Number(0, $type=1.builtin.int),
      $type=1.builtin.int)),
     While(Call(Attr(Var(Name(idx), $type=1.builtin.int), Name(__lt__),
       $type=1.builtin.numeric.__lt__), Call(Attr(Var(Name(fields),
         $type=1.builtin.List<1.reflect.Field>), Name(size),
        $type=1.builtin.List.size), $type=1.builtin.int),
      $type=1.builtin.bool), Block(
       If(Call(Attr(Attr(Call(Attr(Var(Name(fields),
             $type=1.builtin.List<1.reflect.Field>), Name(__get__),
            $type=1.builtin.List.__get__), Var(Name(idx), $type=1.builtin.int),
           $type=1.reflect.Field), Name(name), $type=1.builtin.String),
          Name(__eq__), $type=1.builtin.Object.__eq__), Var(Name(name),
         $type=1.builtin.String), $type=1.builtin.bool), Block(
         Return(Call(Attr(Var(Name(fields),
            $type=1.builtin.List<1.reflect.Field>), Name(__get__),
           $type=1.builtin.List.__get__), Var(Name(idx), $type=1.builtin.int),
          $type=1.reflect.Field)))),
       Assign(Var(Name(idx), $type=1.builtin.int), Call(Attr(Var(Name(idx),
          $type=1.builtin.int), Name(__add__),
         $type=1.builtin.numeric.__add__), Number(1, $type=1.builtin.int),
        $type=1.builtin.int)))),
     Return(Null(null, $type=1.builtin.Object)))),

   Method(static=False, Type(Name(List), Type(Name(Method))), Name(getMethods),
    Block(
     Return(Var(Name(methods), $type=1.builtin.List<1.reflect.Method>)))),

   Method(static=False, Type(Name(Method)), Name(getMethod),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Block(
     Local(
      Declaration(Type(Name(int)), Name(idx), Number(0, $type=1.builtin.int),
      $type=1.builtin.int)),
     While(Call(Attr(Var(Name(idx), $type=1.builtin.int), Name(__lt__),
       $type=1.builtin.numeric.__lt__), Call(Attr(Var(Name(methods),
         $type=1.builtin.List<1.reflect.Method>), Name(size),
        $type=1.builtin.List.size), $type=1.builtin.int),
      $type=1.builtin.bool), Block(
       If(Call(Attr(Attr(Call(Attr(Var(Name(methods),
             $type=1.builtin.List<1.reflect.Method>), Name(__get__),
            $type=1.builtin.List.__get__), Var(Name(idx), $type=1.builtin.int),
           $type=1.reflect.Method), Name(name), $type=1.builtin.String),
          Name(__eq__), $type=1.builtin.Object.__eq__), Var(Name(name),
         $type=1.builtin.String), $type=1.builtin.bool), Block(
         Return(Call(Attr(Var(Name(methods),
            $type=1.builtin.List<1.reflect.Method>), Name(__get__),
           $type=1.builtin.List.__get__), Var(Name(idx), $type=1.builtin.int),
          $type=1.reflect.Method)))),
       Assign(Var(Name(idx), $type=1.builtin.int), Call(Attr(Var(Name(idx),
          $type=1.builtin.int), Name(__add__),
         $type=1.builtin.numeric.__add__), Number(1, $type=1.builtin.int),
        $type=1.builtin.int)))),
     Return(Null(null, $type=1.builtin.Object)))),

   MethodMacro(Type(Name(JSONObject)), Name(toJSON),
    Call(Attr(Call(Type(Name(JSONObject)), $type=1.builtin.JSONObject),
      Name(setString), $type=1.builtin.JSONObject.setString),
     Attr(Var(Name(self), $type=1.reflect.Class), Name(id),
     $type=1.builtin.String), $type=1.builtin.JSONObject)),

   MethodMacro(Type(Name(JSONObject)), Name(__to_JSONObject),
    Call(Attr(Var(Name(self), $type=1.reflect.Class), Name(toJSON),
     $type=1.reflect.Class.toJSON), $type=1.builtin.JSONObject)),

   Method(static=False, Type(Name(String)), Name(_getClass), Block(
     Return(String("reflect.Class", $type=1.builtin.String)))),

   Method(static=False, Type(Name(Object)), Name(_getField),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Block(
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("classes",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.reflect.Class), Name(classes),
        $type=1.builtin.Map<1.builtin.String,1.reflect.Class>)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("VOID", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.reflect.Class), Name(VOID),
        $type=1.reflect.Class)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("BOOL", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.reflect.Class), Name(BOOL),
        $type=1.reflect.Class)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("INT", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.reflect.Class), Name(INT),
        $type=1.reflect.Class)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("LONG", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.reflect.Class), Name(LONG),
        $type=1.reflect.Class)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("STRING",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.reflect.Class), Name(STRING),
        $type=1.reflect.Class)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("id", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.reflect.Class), Name(id),
        $type=1.builtin.String)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("name", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.reflect.Class), Name(name),
        $type=1.builtin.String)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("parameters",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.reflect.Class), Name(parameters),
        $type=1.builtin.List<1.reflect.Class>)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("fields",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.reflect.Class), Name(fields),
        $type=1.builtin.List<1.reflect.Field>)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("methods",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.reflect.Class), Name(methods),
        $type=1.builtin.List<1.reflect.Method>)))),
     Return(Null(null, $type=1.builtin.Object)))),

   Method(static=False, Type(Name(void)), Name(_setField),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Param(Type(Name(Object)), Name(value), $type=1.builtin.Object),
    Block(
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("classes",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.reflect.Class), Name(classes),
        $type=1.builtin.Map<1.builtin.String,1.reflect.Class>),
        Cast(Var(Name(value), $type=1.builtin.Object),
        $type=1.builtin.Map<1.builtin.String,1.reflect.Class>)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("VOID", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.reflect.Class), Name(VOID),
        $type=1.reflect.Class), Cast(Var(Name(value), $type=1.builtin.Object),
        $type=1.reflect.Class)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("BOOL", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.reflect.Class), Name(BOOL),
        $type=1.reflect.Class), Cast(Var(Name(value), $type=1.builtin.Object),
        $type=1.reflect.Class)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("INT", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.reflect.Class), Name(INT),
        $type=1.reflect.Class), Cast(Var(Name(value), $type=1.builtin.Object),
        $type=1.reflect.Class)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("LONG", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.reflect.Class), Name(LONG),
        $type=1.reflect.Class), Cast(Var(Name(value), $type=1.builtin.Object),
        $type=1.reflect.Class)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("STRING",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.reflect.Class), Name(STRING),
        $type=1.reflect.Class), Cast(Var(Name(value), $type=1.builtin.Object),
        $type=1.reflect.Class)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("id", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.reflect.Class), Name(id),
        $type=1.builtin.String), Cast(Var(Name(value), $type=1.builtin.Object),
        $type=1.builtin.String)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("name", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.reflect.Class), Name(name),
        $type=1.builtin.String), Cast(Var(Name(value), $type=1.builtin.Object),
        $type=1.builtin.String)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("parameters",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.reflect.Class), Name(parameters),
        $type=1.builtin.List<1.reflect.Class>), Cast(Var(Name(value),
         $type=1.builtin.Object), $type=1.builtin.List<1.reflect.Class>)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("fields",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.reflect.Class), Name(fields),
        $type=1.builtin.List<1.reflect.Field>), Cast(Var(Name(value),
         $type=1.builtin.Object), $type=1.builtin.List<1.reflect.Field>)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("methods",
       $type=1.builtin.String), $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.reflect.Class), Name(methods),
        $type=1.builtin.List<1.reflect.Method>), Cast(Var(Name(value),
         $type=1.builtin.Object),
        $type=1.builtin.List<1.reflect.Method>))))))),

  Class(Name(Field),
   Field(static=False, Type(Name(String)), Name(type), $type=1.builtin.String),
   Field(static=False, Type(Name(String)), Name(name), $type=1.builtin.String),

   Constructor(Name(Field),
    Param(Type(Name(String)), Name(type), $type=1.builtin.String),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Block(
     Assign(Attr(Var(Name(self), $type=1.reflect.Field), Name(type),
      $type=1.builtin.String), Var(Name(type), $type=1.builtin.String)),
     Assign(Attr(Var(Name(self), $type=1.reflect.Field), Name(name),
      $type=1.builtin.String), Var(Name(name), $type=1.builtin.String)))),

   Method(static=False, Type(Name(Class)), Name(getType), Block(
     Return(Call(Attr(Var(Name(Class), $type=1.reflect.Class), Name(get),
       $type=1.reflect.Class.get), Var(Name(type), $type=1.builtin.String),
      $type=1.reflect.Class)))),

   Method(static=False, Type(Name(String)), Name(getName), Block(
     Return(Var(Name(name), $type=1.builtin.String)))),

   Method(static=False, Type(Name(String)), Name(_getClass), Block(
     Return(String("reflect.Field", $type=1.builtin.String)))),

   Method(static=False, Type(Name(Object)), Name(_getField),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Block(
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("type", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.reflect.Field), Name(type),
        $type=1.builtin.String)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("name", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Return(Attr(Var(Name(self), $type=1.reflect.Field), Name(name),
        $type=1.builtin.String)))),
     Return(Null(null, $type=1.builtin.Object)))),

   Method(static=False, Type(Name(void)), Name(_setField),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Param(Type(Name(Object)), Name(value), $type=1.builtin.Object),
    Block(
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("type", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.reflect.Field), Name(type),
        $type=1.builtin.String), Cast(Var(Name(value), $type=1.builtin.Object),
        $type=1.builtin.String)))),
     If(Call(Attr(Var(Name(name), $type=1.builtin.String), Name(__eq__),
       $type=1.builtin.Object.__eq__), String("name", $type=1.builtin.String),
      $type=1.builtin.bool), Block(
       Assign(Attr(Var(Name(self), $type=1.reflect.Field), Name(name),
        $type=1.builtin.String), Cast(Var(Name(value), $type=1.builtin.Object),
        $type=1.builtin.String))))))),

  Class(Name(Method),
   Field(static=False, Type(Name(String)), Name(type), $type=1.builtin.String),
   Field(static=False, Type(Name(String)), Name(name), $type=1.builtin.String),
   Field(static=False, Type(Name(List), Type(Name(String))), Name(parameters),
   $type=1.builtin.List<1.builtin.String>),

   Constructor(Name(Method),
    Param(Type(Name(String)), Name(type), $type=1.builtin.String),
    Param(Type(Name(String)), Name(name), $type=1.builtin.String),
    Param(Type(Name(List), Type(Name(String))), Name(parameters),
    $type=1.builtin.List<1.builtin.String>),
    Block(
     Assign(Attr(Var(Name(self), $type=1.reflect.Method), Name(type),
      $type=1.builtin.String), Var(Name(type), $type=1.builtin.String)),
     Assign(Attr(Var(Name(self), $type=1.reflect.Method), Name(name),
      $type=1.builtin.String), Var(Name(name), $type=1.builtin.String)),
     Assign(Attr(Var(Name(self), $type=1.reflect.Method), Name(parameters),
      $type=1.builtin.List<1.builtin.String>), Var(Name(parameters),
      $type=1.builtin.List<1.builtin.String>)))),

   Method(static=False, Type(Name(Class)), Name(getType), Block(
     Return(Call(Attr(Var(Name(Class), $type=1.reflect.Class), Name(get),
       $type=1.reflect.Class.get), Var(Name(type), $type=1.builtin.String),
      $type=1.reflect.Class)))),

   Method(static=False, Type(Name(String)), Name(getName), Block(
     Return(Var(Name(name), $type=1.builtin.String)))),

   Method(static=False, Type(Name(List), Type(Name(Class))),
    Name(getParameters), Block(
     Local(
      Declaration(Type(Name(List), Type(Name(Class))), Name(result), List(,
       $type=1.builtin.List<1.reflect.Class>),
      $type=1.builtin.List<1.reflect.Class>)),
     Local(
      Declaration(Type(Name(int)), Name(idx), Number(0, $type=1.builtin.int),
      $type=1.builtin.int)),
     While(Call(Attr(Var(Name(idx), $type=1.builtin.int), Name(__lt__),
       $type=1.builtin.numeric.__lt__), Call(Attr(Var(Name(parameters),
         $type=1.builtin.List<1.builtin.String>), Name(size),
        $type=1.builtin.List.size), $type=1.builtin.int),
      $type=1.builtin.bool), Block(
       ExprStmt(Call(Attr(Var(Name(result),
          $type=1.builtin.List<1.reflect.Class>), Name(add),
         $type=1.builtin.List.add), Call(Attr(Var(Name(Class),
           $type=1.reflect.Class), Name(get), $type=1.reflect.Class.get),
          Call(Attr(Var(Name(parameters),
            $type=1.builtin.List<1.builtin.String>), Name(__get__),
           $type=1.builtin.List.__get__), Var(Name(idx), $type=1.builtin.int),
          $type=1.builtin.String), $type=1.reflect.Class),
        $type=1.builtin.void)),
       Assign(Var(Name(idx), $type=1.builtin.int), Call(Attr(Var(Name(idx),
          $type=1.builtin.int), Name(__add__),
         $type=1.builtin.numeric.__add__), Number(1, $type=1.builtin.int),
        $type=1.builtin.int)))),
     Return(Var(Name(result), $type=1.builtin.List<1.reflect.Class>)))),

   Method(static=False, Type(Name(Object)), Name(invoke),
    Param(Type(Name(Object)), Name(object), $type=1.builtin.Object),
    Param(Type(Name(List), Type(Name(Object))), Name(args),
    $type=1.builtin.List<1.builtin.Object>))))
)