<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Defining the Service Contract &mdash; Datawire Connect 0.3.10 documentation</title>
    
    <link rel="stylesheet" href="../../_static/better.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.3.10',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Datawire Connect 0.3.10 documentation" href="../../index.html" />
    <link rel="up" title="Getting Started with RPC Walkthrough" href="index.html" />
    <link rel="next" title="Pick a Language" href="language.html" />
    <link rel="prev" title="Quickly Trying RPC" href="quicktry.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  </head>
  <body role="document">
    <header id="pageheader"><h1><a href="../../index.html ">
        Datawire Connect 0.3.10 documentation
    </a></h1></header>
  <div class="related top">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="quicktry.html" title="Previous document">Quickly Trying RPC</a>
        </li>
        <li>
          <a href="language.html" title="Next document">Pick a Language</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../../index.html">Datawire Connect 0.3.10 documentation</a></li>
      <li>
        <a href="index.html">Getting Started with RPC Walkthrough</a>
      </li> 
    </ul>
  </nav>
  </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="defining-the-service-contract">
<h1>Defining the Service Contract<a class="headerlink" href="#defining-the-service-contract" title="Permalink to this headline">¶</a></h1>
<p>The first step when working with RPC is to define a contract in Quark. This contract defines the value classes, interfaces, and interaction patterns as well as how they can be used together.</p>
<p>Note: If you don&#8217;t want step-by-step guidance about how to create the contract and just want to start from a completed contract, there is a <a class="reference internal" href="#fullexamplecontract"><span>link to the full contract file</span></a> at the bottom of this page.</p>
<div class="section" id="part-1-creating-the-framework">
<span id="part1framework"></span><h2>Part 1: Creating the framework<a class="headerlink" href="#part-1-creating-the-framework" title="Permalink to this headline">¶</a></h2>
<p>This section helps you define the necessary structure for your service contract.</p>
<p>Relevant code:</p>
<div class="highlight-none"><div class="highlight"><pre>@version(&quot;0.1.0&quot;)
<span class="hll">package hello {
</span>
<span class="hll">}
</span></pre></div>
</div>
<p>This creates a versioned Quark library in a package named hello.</p>
</div>
<div class="section" id="part-2-adding-value-classes">
<span id="part2classes"></span><h2>Part 2: Adding value classes<a class="headerlink" href="#part-2-adding-value-classes" title="Permalink to this headline">¶</a></h2>
<p>This section defines the value classes needed by the Hello World RPC service. These classes hold the data that will be passed between the client and the server.</p>
<div class="highlight-none"><div class="highlight"><pre>@version(&quot;0.1.0&quot;)
package hello {

<span class="hll">   class Request {
</span><span class="hll">      String text;
</span><span class="hll">   }
</span><span class="hll">
</span><span class="hll">   class Response {
</span><span class="hll">      String result;
</span><span class="hll">   }
</span>
}
</pre></div>
</div>
</div>
<div class="section" id="part-3-interface">
<span id="part3interface"></span><h2>Part 3: Interface<a class="headerlink" href="#part-3-interface" title="Permalink to this headline">¶</a></h2>
<p>This section defines the interface needed by the Hello World RPC service. The interface contains the details of the interaction pattern being used, in this case a single request that generates a single response.</p>
<div class="highlight-none"><div class="highlight"><pre>@version(&quot;0.1.0&quot;)
package hello {

   class Request {
      String text;
   }

   class Response {
      String result;
   }

<span class="hll">   interface Hello extends Service {
</span>
<span class="hll">      @delegate(self.rpc)
</span><span class="hll">      Response hello(Request request);
</span><span class="hll">   }
</span>
}
</pre></div>
</div>
<p>The Hello interface extends the Service interface supplied by Quark. This interface defines the actual communication mechanism between the client and the server.</p>
<p>The Hello interface specifies the use of the rpc interaction pattern by including <code class="docutils literal"><span class="pre">&#64;delegate(self.rpc)</span></code>. Note that this is a workaround; the preferred method for specifying the simple rpc interaction pattern is <code class="docutils literal"><span class="pre">&#64;delegate(rpc)</span></code> but it is not currently working.</p>
<p>The Hello interface define a method named hello() that expects a request as an input parameter and returns a response object. This is the method that glues together the request and response; It is used in both the client and the server implementations. In the client it is used to send a request to the server and in the server it determines the proper response to that request.</p>
</div>
<div class="section" id="part-4-client">
<span id="part4client"></span><h2>Part 4: Client<a class="headerlink" href="#part-4-client" title="Permalink to this headline">¶</a></h2>
<p>This section defines the client processing code in Quark. This definition will be used within the client code in each supported target language to perform the actual communications work of the client.</p>
<p>Relevant code:</p>
<div class="highlight-none"><div class="highlight"><pre>@version(&quot;0.1.0&quot;)
package hello {

   class Request {
      String text;
   }

   class Response {
      String result;
   }

   interface Hello extends Service {

      @delegate(self.rpc)
      Response hello(Request request);
   }

<span class="hll">   class HelloClient extends Client, Hello {}
</span>}
</pre></div>
</div>
<p>Define an empty class named HelloClient that extends the Quark Client integration type and uses the Hello interface we just defined. This class will be instantiated in the client code and used to send requests to the server. Most of the work of this class is abstracted away inside the Quark Client class.</p>
</div>
<div class="section" id="part-5-server">
<span id="part5server"></span><h2>Part 5: Server<a class="headerlink" href="#part-5-server" title="Permalink to this headline">¶</a></h2>
<p>This section defines the server in Quark. This definition will be used within the server written in each supported language to access the code within Quark and the installed integration that accepts the client request and packages up the response to send back to the client.</p>
<p id="fullexamplecontract">Relevant code:</p>
<div class="highlight-none"><div class="highlight"><pre>@version(&quot;0.1.0&quot;)
package hello {

   class Request {
      String text;
   }

   class Response {
      String result;
   }

   interface Hello extends Service {

      @delegate(self.rpc)
      Response hello(Request request);
   }

   class HelloClient extends Client, Hello {}

<span class="hll">   class HelloServer extends Server&lt;Hello&gt; {}
</span>}
</pre></div>
</div>
<p>Define an empty class named HelloServer that extends the Quark Server implementation type. This type expects an implementation type, in this case the Hello interface defined above. This class will be instantiated in the server code and used to accept requests from the client and return responses to it based on those requests. Most of the work of this class is abstracted away inside the Quark Server class.</p>
<p>That&#8217;s it! The contract is fully defined now and ready to be turned into a library for your Hello clients and servers to use.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Defining the Service Contract</a><ul>
<li><a class="reference internal" href="#part-1-creating-the-framework">Part 1: Creating the framework</a></li>
<li><a class="reference internal" href="#part-2-adding-value-classes">Part 2: Adding value classes</a></li>
<li><a class="reference internal" href="#part-3-interface">Part 3: Interface</a></li>
<li><a class="reference internal" href="#part-4-client">Part 4: Client</a></li>
<li><a class="reference internal" href="#part-5-server">Part 5: Server</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="quicktry.html"
                        title="previous chapter">Quickly Trying RPC</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="language.html"
                        title="next chapter">Pick a Language</a></p>
<div class="sourcelink">
  <a href="../../_sources/tutorials/rpc-basic/contract.txt" rel="nofollow">
    Show page source
  </a>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="related bottom">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="quicktry.html" title="Previous document">Quickly Trying RPC</a>
        </li>
        <li>
          <a href="language.html" title="Next document">Pick a Language</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../../index.html">Datawire Connect 0.3.10 documentation</a></li>
      <li>
        <a href="index.html">Getting Started with RPC Walkthrough</a>
      </li> 
    </ul>
  </nav>
  </div>

  <footer id="pagefooter">&copy; 2015, 2016 Datawire.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a>
      1.3.4.

  </footer>

  

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57322503-4', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>