File(Import(Name(quark)), Import(Name(quark), Name(reflect)),
 Import(Name(quark), Name(concurrent)),

 Package(Name(quark),

  Package(Name(test),

   Class(Name(TestInitializer), Type(Name(TLSInitializer), Type(Name(Test))),

    Method(static=False, Type(Name(Test)), Name(getValue), Block(
      Return(Null(null, $type=1.quark.Object)))),

    Method(static=False, Type(Name(String)), Name(_getClass), Block(
      Return(String("quark.test.TestInitializer", $type=1.quark.String)))),

    Method(static=False, Type(Name(Object)), Name(_getField),
     Param(Type(Name(String)), Name(name), $type=1.quark.String),
     Block(
      Return(Null(null, $type=1.quark.Object)))),

    Method(static=False, Type(Name(void)), Name(_setField),
     Param(Type(Name(String)), Name(name), $type=1.quark.String),
     Param(Type(Name(Object)), Name(value), $type=1.quark.Object),
     Block()),
    Field(static=True, Type(Name(reflect), Name(Class)),
     Name(quark_test_TestInitializer_ref), Attr(Attr(Var(Name(quark_md),
       $type=12.quark_md), Name(Root), $type=12.quark_md.Root),
      Name(quark_test_TestInitializer_md), $type=3.quark.reflect.Class),
    $type=3.quark.reflect.Class)),

   Function(Type(Name(String)), Name(red),
    Param(Type(Name(String)), Name(str), $type=1.quark.String),
    Block(
     Return(Call(Attr(Call(Attr(String("\x1b[31;1m", $type=1.quark.String),
          Name(__add__), $type=1.quark.String.__add__), Var(Name(str),
         $type=1.quark.String), $type=1.quark.String), Name(__add__),
       $type=1.quark.String.__add__), String("\x1b[0m", $type=1.quark.String),
      $type=1.quark.String)))),

   Function(Type(Name(String)), Name(green),
    Param(Type(Name(String)), Name(str), $type=1.quark.String),
    Block(
     Return(Call(Attr(Call(Attr(String("\x1b[32;1m", $type=1.quark.String),
          Name(__add__), $type=1.quark.String.__add__), Var(Name(str),
         $type=1.quark.String), $type=1.quark.String), Name(__add__),
       $type=1.quark.String.__add__), String("\x1b[0m", $type=1.quark.String),
      $type=1.quark.String)))),

   Function(Type(Name(String)), Name(bold),
    Param(Type(Name(String)), Name(str), $type=1.quark.String),
    Block(
     Return(Call(Attr(Call(Attr(String("\x1b[1m", $type=1.quark.String),
          Name(__add__), $type=1.quark.String.__add__), Var(Name(str),
         $type=1.quark.String), $type=1.quark.String), Name(__add__),
       $type=1.quark.String.__add__), String("\x1b[0m", $type=1.quark.String),
      $type=1.quark.String)))),

   Class(Name(Test),
    Field(static=True, Type(Name(TLS), Type(Name(Test))), Name(ctx),
     Call(Type(Name(TLS), Type(Name(Test))), Call(Type(Name(TestInitializer)),
      $type=9.quark.test.TestInitializer),
     $type=6.quark.concurrent.TLS<9.quark.test.Test>),
    $type=6.quark.concurrent.TLS<9.quark.test.Test>),

    Method(static=True, Type(Name(Test)), Name(current), Block(
      Return(Call(Attr(Var(Name(ctx),
         $type=6.quark.concurrent.TLS<9.quark.test.Test>), Name(getValue),
        $type=6.quark.concurrent.TLS.getValue), $type=9.quark.test.Test)))),
    Field(static=False, Type(Name(String)), Name(name), $type=1.quark.String),
    Field(static=False, Type(Name(int)), Name(checks), Number(0,
     $type=1.quark.int), $type=1.quark.int),
    Field(static=False, Type(Name(List), Type(Name(String))), Name(failures),
     List(, $type=1.quark.List<1.quark.String>),
    $type=1.quark.List<1.quark.String>),

    Constructor(Name(Test),
     Param(Type(Name(String)), Name(name), $type=1.quark.String),
     Block(
      Assign(Attr(Var(Name(self), $type=9.quark.test.Test), Name(name),
       $type=1.quark.String), Var(Name(name), $type=1.quark.String)))),

    Method(static=False, Type(Name(bool)), Name(match),
     Param(Type(Name(List), Type(Name(String))), Name(filters),
     $type=1.quark.List<1.quark.String>),
     Block(
      If(Call(Attr(Call(Attr(Var(Name(filters),
           $type=1.quark.List<1.quark.String>), Name(__eq__),
          $type=1.quark.Object.__eq__), Null(null, $type=1.quark.Object),
         $type=1.quark.bool), Name(__or__), $type=1.quark.bool.__or__),
        Call(Attr(Call(Attr(Var(Name(filters),
            $type=1.quark.List<1.quark.String>), Name(size),
           $type=1.quark.List.size), $type=1.quark.int), Name(__eq__),
         $type=1.quark.Object.__eq__), Number(0, $type=1.quark.int),
        $type=1.quark.bool), $type=1.quark.bool), Block(
        Return(Bool(true, $type=1.quark.bool)))),
      Local(
       Declaration(Type(Name(int)), Name(idx), Number(0, $type=1.quark.int),
       $type=1.quark.int)),
      While(Call(Attr(Var(Name(idx), $type=1.quark.int), Name(__lt__),
        $type=1.quark.numeric.__lt__), Call(Attr(Var(Name(filters),
          $type=1.quark.List<1.quark.String>), Name(size),
         $type=1.quark.List.size), $type=1.quark.int), $type=1.quark.bool),
       Block(
        Local(
         Declaration(Type(Name(String)), Name(filter),
          Call(Attr(Var(Name(filters), $type=1.quark.List<1.quark.String>),
            Name(__get__), $type=1.quark.List.__get__), Var(Name(idx),
           $type=1.quark.int), $type=1.quark.String), $type=1.quark.String)),
        If(Call(Attr(Call(Attr(Var(Name(name), $type=1.quark.String),
             Name(find), $type=1.quark.String.find), Var(Name(filter),
            $type=1.quark.String), $type=1.quark.int), Name(__ge__),
          $type=1.quark.numeric.__ge__), Number(0, $type=1.quark.int),
         $type=1.quark.bool), Block(
          Return(Bool(true, $type=1.quark.bool)))),
        Assign(Var(Name(idx), $type=1.quark.int), Call(Attr(Var(Name(idx),
           $type=1.quark.int), Name(__add__), $type=1.quark.numeric.__add__),
          Number(1, $type=1.quark.int), $type=1.quark.int)))),
      Return(Bool(false, $type=1.quark.bool)))),

    Method(static=False, Type(Name(void)), Name(start), Block(
      ExprStmt(Call(Attr(Var(Name(ctx),
         $type=6.quark.concurrent.TLS<9.quark.test.Test>), Name(setValue),
        $type=6.quark.concurrent.TLS.setValue), Var(Name(self),
        $type=9.quark.test.Test), $type=1.quark.void)))),

    Method(static=False, Type(Name(void)), Name(stop), Block(
      Local(
       Declaration(Type(Name(String)), Name(result),
        Call(Attr(Call(Attr(Call(Attr(Call(Attr(Call(Attr(Var(Name(name),
                  $type=1.quark.String), Name(__add__),
                 $type=1.quark.String.__add__), String(" [",
                 $type=1.quark.String), $type=1.quark.String), Name(__add__),
               $type=1.quark.String.__add__), Call(Attr(Var(Name(checks),
                 $type=1.quark.int), Name(toString),
                $type=1.quark.int.toString), $type=1.quark.String),
              $type=1.quark.String), Name(__add__),
             $type=1.quark.String.__add__), String(" checks, ",
             $type=1.quark.String), $type=1.quark.String), Name(__add__),
           $type=1.quark.String.__add__),
           Call(Attr(Call(Attr(Var(Name(failures),
               $type=1.quark.List<1.quark.String>), Name(size),
              $type=1.quark.List.size), $type=1.quark.int), Name(toString),
            $type=1.quark.int.toString), $type=1.quark.String),
          $type=1.quark.String), Name(__add__), $type=1.quark.String.__add__),
         String(" failures]", $type=1.quark.String), $type=1.quark.String),
       $type=1.quark.String)),
      If(Call(Attr(Call(Attr(Var(Name(failures),
           $type=1.quark.List<1.quark.String>), Name(size),
          $type=1.quark.List.size), $type=1.quark.int), Name(__gt__),
        $type=1.quark.numeric.__gt__), Number(0, $type=1.quark.int),
       $type=1.quark.bool), Block(
        ExprStmt(Call(Var(Name(print), $type=0.quark.print),
          Call(Var(Name(red), $type=9.quark.test.red), Var(Name(result),
           $type=1.quark.String), $type=1.quark.String), $type=1.quark.void))),
       Block(
        ExprStmt(Call(Var(Name(print), $type=0.quark.print),
          Call(Var(Name(bold), $type=9.quark.test.bold), Var(Name(result),
           $type=1.quark.String), $type=1.quark.String),
         $type=1.quark.void)))),
      Local(
       Declaration(Type(Name(int)), Name(idx), Number(0, $type=1.quark.int),
       $type=1.quark.int)),
      While(Call(Attr(Var(Name(idx), $type=1.quark.int), Name(__lt__),
        $type=1.quark.numeric.__lt__), Call(Attr(Var(Name(failures),
          $type=1.quark.List<1.quark.String>), Name(size),
         $type=1.quark.List.size), $type=1.quark.int), $type=1.quark.bool),
       Block(
        ExprStmt(Call(Var(Name(print), $type=0.quark.print),
          Call(Var(Name(red), $type=9.quark.test.red), Call(Attr(String("  ",
             $type=1.quark.String), Name(__add__),
            $type=1.quark.String.__add__), Call(Attr(Var(Name(failures),
              $type=1.quark.List<1.quark.String>), Name(__get__),
             $type=1.quark.List.__get__), Var(Name(idx), $type=1.quark.int),
            $type=1.quark.String), $type=1.quark.String),
          $type=1.quark.String), $type=1.quark.void)),
        Assign(Var(Name(idx), $type=1.quark.int), Call(Attr(Var(Name(idx),
           $type=1.quark.int), Name(__add__), $type=1.quark.numeric.__add__),
          Number(1, $type=1.quark.int), $type=1.quark.int)))),
      ExprStmt(Call(Attr(Var(Name(ctx),
         $type=6.quark.concurrent.TLS<9.quark.test.Test>), Name(setValue),
        $type=6.quark.concurrent.TLS.setValue), Null(null,
        $type=1.quark.Object), $type=1.quark.void)))),

    Method(static=False, Type(Name(bool)), Name(check),
     Param(Type(Name(bool)), Name(value), $type=1.quark.bool),
     Param(Type(Name(String)), Name(message), $type=1.quark.String),
     Block(
      Assign(Var(Name(checks), $type=1.quark.int), Call(Attr(Var(Name(checks),
         $type=1.quark.int), Name(__add__), $type=1.quark.numeric.__add__),
        Number(1, $type=1.quark.int), $type=1.quark.int)),
      If(Call(Attr(Var(Name(value), $type=1.quark.bool), Name(__not__),
        $type=1.quark.bool.__not__), $type=1.quark.bool), Block(
        ExprStmt(Call(Attr(Var(Name(failures),
           $type=1.quark.List<1.quark.String>), Name(add),
          $type=1.quark.List.add), Var(Name(message), $type=1.quark.String),
         $type=1.quark.void)))),
      Return(Var(Name(value), $type=1.quark.bool)))),

    Method(static=False, Type(Name(void)), Name(fail),
     Param(Type(Name(String)), Name(message), $type=1.quark.String),
     Block(
      ExprStmt(Call(Var(Name(check), $type=9.quark.test.Test.check),
        Bool(false, $type=1.quark.bool), Var(Name(message),
        $type=1.quark.String), $type=1.quark.bool)))),

    Method(static=False, Type(Name(void)), Name(run), Block()),

    Method(static=False, Type(Name(String)), Name(_getClass), Block(
      Return(String("quark.test.Test", $type=1.quark.String)))),

    Method(static=False, Type(Name(Object)), Name(_getField),
     Param(Type(Name(String)), Name(name), $type=1.quark.String),
     Block(
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("ctx", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Return(Attr(Var(Name(self), $type=9.quark.test.Test), Name(ctx),
         $type=6.quark.concurrent.TLS<9.quark.test.Test>)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("name", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Return(Attr(Var(Name(self), $type=9.quark.test.Test), Name(name),
         $type=1.quark.String)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("checks", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Return(Attr(Var(Name(self), $type=9.quark.test.Test), Name(checks),
         $type=1.quark.int)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("failures", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Return(Attr(Var(Name(self), $type=9.quark.test.Test), Name(failures),
         $type=1.quark.List<1.quark.String>)))),
      Return(Null(null, $type=1.quark.Object)))),

    Method(static=False, Type(Name(void)), Name(_setField),
     Param(Type(Name(String)), Name(name), $type=1.quark.String),
     Param(Type(Name(Object)), Name(value), $type=1.quark.Object),
     Block(
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("ctx", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Assign(Attr(Var(Name(self), $type=9.quark.test.Test), Name(ctx),
         $type=6.quark.concurrent.TLS<9.quark.test.Test>),
         Cast(Var(Name(value), $type=1.quark.Object),
         $type=6.quark.concurrent.TLS<9.quark.test.Test>)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("name", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Assign(Attr(Var(Name(self), $type=9.quark.test.Test), Name(name),
         $type=1.quark.String), Cast(Var(Name(value), $type=1.quark.Object),
         $type=1.quark.String)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("checks", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Assign(Attr(Var(Name(self), $type=9.quark.test.Test), Name(checks),
         $type=1.quark.int), Cast(Var(Name(value), $type=1.quark.Object),
         $type=1.quark.int)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("failures", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Assign(Attr(Var(Name(self), $type=9.quark.test.Test), Name(failures),
         $type=1.quark.List<1.quark.String>), Cast(Var(Name(value),
          $type=1.quark.Object), $type=1.quark.List<1.quark.String>)))))),
    Field(static=True, Type(Name(reflect), Name(Class)),
     Name(quark_test_Test_ref), Attr(Attr(Var(Name(quark_md),
       $type=12.quark_md), Name(Root), $type=12.quark_md.Root),
      Name(quark_test_Test_md), $type=3.quark.reflect.Class),
    $type=3.quark.reflect.Class)),

   Class(Name(MethodTest), Type(Name(Test)),
    Field(static=False, Type(Name(Class)), Name(klass),
    $type=3.quark.reflect.Class),
    Field(static=False, Type(Name(Method)), Name(method),
    $type=3.quark.reflect.Method),

    Constructor(Name(MethodTest),
     Param(Type(Name(Class)), Name(klass), $type=3.quark.reflect.Class),
     Param(Type(Name(Method)), Name(method), $type=3.quark.reflect.Method),
     Block(
      ExprStmt(Call(Super(, $type=9.quark.test.Test),
        Call(Attr(Call(Attr(Call(Attr(Var(Name(klass),
              $type=3.quark.reflect.Class), Name(getName),
             $type=3.quark.reflect.Class.getName), $type=1.quark.String),
            Name(__add__), $type=1.quark.String.__add__), String(".",
           $type=1.quark.String), $type=1.quark.String), Name(__add__),
         $type=1.quark.String.__add__), Call(Attr(Var(Name(method),
           $type=3.quark.reflect.Method), Name(getName),
          $type=3.quark.reflect.Method.getName), $type=1.quark.String),
        $type=1.quark.String), $type=9.quark.test.Test)),
      Assign(Attr(Var(Name(self), $type=9.quark.test.MethodTest), Name(klass),
       $type=3.quark.reflect.Class), Var(Name(klass),
       $type=3.quark.reflect.Class)),
      Assign(Attr(Var(Name(self), $type=9.quark.test.MethodTest), Name(method),
       $type=3.quark.reflect.Method), Var(Name(method),
       $type=3.quark.reflect.Method)))),

    Method(static=False, Type(Name(void)), Name(run), Block(
      Local(
       Declaration(Type(Name(Method)), Name(setup), Call(Attr(Var(Name(klass),
          $type=3.quark.reflect.Class), Name(getMethod),
         $type=3.quark.reflect.Class.getMethod), String("setup",
         $type=1.quark.String), $type=3.quark.reflect.Method),
       $type=3.quark.reflect.Method)),
      Local(
       Declaration(Type(Name(Method)), Name(teardown),
        Call(Attr(Var(Name(klass), $type=3.quark.reflect.Class),
          Name(getMethod), $type=3.quark.reflect.Class.getMethod),
         String("teardown", $type=1.quark.String),
        $type=3.quark.reflect.Method), $type=3.quark.reflect.Method)),
      Local(
       Declaration(Type(Name(Object)), Name(test), Call(Attr(Var(Name(klass),
          $type=3.quark.reflect.Class), Name(construct),
         $type=3.quark.reflect.Class.construct), List(,
         $type=1.quark.List<1.quark.Object>), $type=1.quark.Object),
       $type=1.quark.Object)),
      If(Call(Attr(Var(Name(setup), $type=3.quark.reflect.Method),
         Name(__ne__), $type=1.quark.Object.__ne__), Null(null,
        $type=1.quark.Object), $type=1.quark.bool), Block(
        ExprStmt(Call(Attr(Var(Name(setup), $type=3.quark.reflect.Method),
           Name(invoke), $type=3.quark.reflect.Method.invoke), Var(Name(test),
          $type=1.quark.Object), List(, $type=1.quark.List<1.quark.Object>),
         $type=1.quark.Object)))),
      ExprStmt(Call(Attr(Var(Name(method), $type=3.quark.reflect.Method),
         Name(invoke), $type=3.quark.reflect.Method.invoke), Var(Name(test),
        $type=1.quark.Object), List(, $type=1.quark.List<1.quark.Object>),
       $type=1.quark.Object)),
      If(Call(Attr(Var(Name(teardown), $type=3.quark.reflect.Method),
         Name(__ne__), $type=1.quark.Object.__ne__), Null(null,
        $type=1.quark.Object), $type=1.quark.bool), Block(
        ExprStmt(Call(Attr(Var(Name(teardown), $type=3.quark.reflect.Method),
           Name(invoke), $type=3.quark.reflect.Method.invoke), Var(Name(test),
          $type=1.quark.Object), List(, $type=1.quark.List<1.quark.Object>),
         $type=1.quark.Object)))))),

    Method(static=False, Type(Name(String)), Name(_getClass), Block(
      Return(String("quark.test.MethodTest", $type=1.quark.String)))),

    Method(static=False, Type(Name(Object)), Name(_getField),
     Param(Type(Name(String)), Name(name), $type=1.quark.String),
     Block(
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("ctx", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Return(Attr(Var(Name(self), $type=9.quark.test.MethodTest), Name(ctx),
         $type=6.quark.concurrent.TLS<9.quark.test.Test>)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("name", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Return(Attr(Var(Name(self), $type=9.quark.test.MethodTest), Name(name),
         $type=1.quark.String)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("checks", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Return(Attr(Var(Name(self), $type=9.quark.test.MethodTest),
          Name(checks), $type=1.quark.int)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("failures", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Return(Attr(Var(Name(self), $type=9.quark.test.MethodTest),
          Name(failures), $type=1.quark.List<1.quark.String>)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("klass", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Return(Attr(Var(Name(self), $type=9.quark.test.MethodTest),
          Name(klass), $type=3.quark.reflect.Class)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("method", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Return(Attr(Var(Name(self), $type=9.quark.test.MethodTest),
          Name(method), $type=3.quark.reflect.Method)))),
      Return(Null(null, $type=1.quark.Object)))),

    Method(static=False, Type(Name(void)), Name(_setField),
     Param(Type(Name(String)), Name(name), $type=1.quark.String),
     Param(Type(Name(Object)), Name(value), $type=1.quark.Object),
     Block(
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("ctx", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Assign(Attr(Var(Name(self), $type=9.quark.test.MethodTest), Name(ctx),
         $type=6.quark.concurrent.TLS<9.quark.test.Test>),
         Cast(Var(Name(value), $type=1.quark.Object),
         $type=6.quark.concurrent.TLS<9.quark.test.Test>)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("name", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Assign(Attr(Var(Name(self), $type=9.quark.test.MethodTest), Name(name),
         $type=1.quark.String), Cast(Var(Name(value), $type=1.quark.Object),
         $type=1.quark.String)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("checks", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Assign(Attr(Var(Name(self), $type=9.quark.test.MethodTest),
          Name(checks), $type=1.quark.int), Cast(Var(Name(value),
          $type=1.quark.Object), $type=1.quark.int)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("failures", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Assign(Attr(Var(Name(self), $type=9.quark.test.MethodTest),
          Name(failures), $type=1.quark.List<1.quark.String>),
         Cast(Var(Name(value), $type=1.quark.Object),
         $type=1.quark.List<1.quark.String>)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("klass", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Assign(Attr(Var(Name(self), $type=9.quark.test.MethodTest),
          Name(klass), $type=3.quark.reflect.Class), Cast(Var(Name(value),
          $type=1.quark.Object), $type=3.quark.reflect.Class)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("method", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Assign(Attr(Var(Name(self), $type=9.quark.test.MethodTest),
          Name(method), $type=3.quark.reflect.Method), Cast(Var(Name(value),
          $type=1.quark.Object), $type=3.quark.reflect.Method)))))),
    Field(static=True, Type(Name(reflect), Name(Class)),
     Name(quark_test_MethodTest_ref), Attr(Attr(Var(Name(quark_md),
       $type=12.quark_md), Name(Root), $type=12.quark_md.Root),
      Name(quark_test_MethodTest_md), $type=3.quark.reflect.Class),
    $type=3.quark.reflect.Class)),

   Function(Type(Name(bool)), Name(check),
    Param(Type(Name(bool)), Name(value), $type=1.quark.bool),
    Param(Type(Name(String)), Name(message), $type=1.quark.String),
    Block(
     Return(Call(Attr(Call(Attr(Var(Name(Test), $type=9.quark.test.Test),
          Name(current), $type=9.quark.test.Test.current),
        $type=9.quark.test.Test), Name(check), $type=9.quark.test.Test.check),
       Var(Name(value), $type=1.quark.bool), Var(Name(message),
       $type=1.quark.String), $type=1.quark.bool)))),

   Function(Type(Name(bool)), Name(checkEqual),
    Param(Type(Name(Object)), Name(expected), $type=1.quark.Object),
    Param(Type(Name(Object)), Name(actual), $type=1.quark.Object),
    Block(
     Return(Call(Attr(Call(Attr(Var(Name(Test), $type=9.quark.test.Test),
          Name(current), $type=9.quark.test.Test.current),
        $type=9.quark.test.Test), Name(check), $type=9.quark.test.Test.check),
       Call(Attr(Var(Name(expected), $type=1.quark.Object), Name(__eq__),
        $type=1.quark.Object.__eq__), Var(Name(actual), $type=1.quark.Object),
       $type=1.quark.bool), Call(Attr(Call(Attr(Call(Attr(String("expected ",
             $type=1.quark.String), Name(__add__),
            $type=1.quark.String.__add__), Call(Attr(Var(Name(expected),
              $type=1.quark.Object), Name(toString),
             $type=1.quark.Object.toString), $type=1.quark.String),
           $type=1.quark.String), Name(__add__), $type=1.quark.String.__add__),
          String(" got ", $type=1.quark.String), $type=1.quark.String),
         Name(__add__), $type=1.quark.String.__add__),
        Call(Attr(Var(Name(actual), $type=1.quark.Object), Name(toString),
         $type=1.quark.Object.toString), $type=1.quark.String),
       $type=1.quark.String), $type=1.quark.bool)))),

   Function(Type(Name(void)), Name(fail),
    Param(Type(Name(String)), Name(message), $type=1.quark.String),
    Block(
     ExprStmt(Call(Attr(Call(Attr(Var(Name(Test), $type=9.quark.test.Test),
          Name(current), $type=9.quark.test.Test.current),
        $type=9.quark.test.Test), Name(check), $type=9.quark.test.Test.check),
       Bool(false, $type=1.quark.bool), Var(Name(message),
       $type=1.quark.String), $type=1.quark.bool)))),

   Class(Name(Harness),
    Field(static=False, Type(Name(String)), Name(pkg), $type=1.quark.String),
    Field(static=False, Type(Name(List), Type(Name(Test))), Name(tests), List(,
     $type=1.quark.List<9.quark.test.Test>),
    $type=1.quark.List<9.quark.test.Test>),
    Field(static=False, Type(Name(int)), Name(filtered), Number(0,
     $type=1.quark.int), $type=1.quark.int),

    Constructor(Name(Harness),
     Param(Type(Name(String)), Name(pkg), $type=1.quark.String),
     Block(
      Assign(Attr(Var(Name(self), $type=9.quark.test.Harness), Name(pkg),
       $type=1.quark.String), Var(Name(pkg), $type=1.quark.String)))),

    Method(static=False, Type(Name(void)), Name(collect),
     Param(Type(Name(List), Type(Name(String))), Name(filters),
     $type=1.quark.List<1.quark.String>),
     Block(
      Local(
       Declaration(Type(Name(List), Type(Name(String))), Name(names),
        Call(Attr(Attr(Var(Name(Class), $type=3.quark.reflect.Class),
           Name(classes),
          $type=1.quark.Map<1.quark.String,3.quark.reflect.Class>), Name(keys),
         $type=1.quark.Map.keys), $type=1.quark.List<1.quark.String>),
       $type=1.quark.List<1.quark.String>)),
      ExprStmt(Call(Attr(Var(Name(names), $type=1.quark.List<1.quark.String>),
         Name(sort), $type=1.quark.List.sort), $type=1.quark.void)),
      Local(
       Declaration(Type(Name(int)), Name(idx), Number(0, $type=1.quark.int),
       $type=1.quark.int)),
      Local(
       Declaration(Type(Name(String)), Name(pfx), Call(Attr(Var(Name(pkg),
          $type=1.quark.String), Name(__add__), $type=1.quark.String.__add__),
         String(".", $type=1.quark.String), $type=1.quark.String),
       $type=1.quark.String)),
      While(Call(Attr(Var(Name(idx), $type=1.quark.int), Name(__lt__),
        $type=1.quark.numeric.__lt__), Call(Attr(Var(Name(names),
          $type=1.quark.List<1.quark.String>), Name(size),
         $type=1.quark.List.size), $type=1.quark.int), $type=1.quark.bool),
       Block(
        Local(
         Declaration(Type(Name(String)), Name(name), Call(Attr(Var(Name(names),
            $type=1.quark.List<1.quark.String>), Name(__get__),
           $type=1.quark.List.__get__), Var(Name(idx), $type=1.quark.int),
          $type=1.quark.String), $type=1.quark.String)),
        If(Call(Attr(Call(Attr(Var(Name(name), $type=1.quark.String),
             Name(startsWith), $type=1.quark.String.startsWith), Var(Name(pfx),
            $type=1.quark.String), $type=1.quark.bool), Name(__and__),
          $type=1.quark.bool.__and__), Call(Attr(Var(Name(name),
            $type=1.quark.String), Name(endsWith),
           $type=1.quark.String.endsWith), String("Test",
           $type=1.quark.String), $type=1.quark.bool), $type=1.quark.bool),
         Block(
          Local(
           Declaration(Type(Name(Class)), Name(klass),
            Call(Attr(Var(Name(Class), $type=3.quark.reflect.Class), Name(get),
             $type=3.quark.reflect.Class.get), Var(Name(name),
             $type=1.quark.String), $type=3.quark.reflect.Class),
           $type=3.quark.reflect.Class)),
          Local(
           Declaration(Type(Name(List), Type(Name(Method))), Name(methods),
            Call(Attr(Var(Name(klass), $type=3.quark.reflect.Class),
              Name(getMethods), $type=3.quark.reflect.Class.getMethods),
            $type=1.quark.List<3.quark.reflect.Method>),
           $type=1.quark.List<3.quark.reflect.Method>)),
          Local(
           Declaration(Type(Name(int)), Name(jdx), Number(0,
            $type=1.quark.int), $type=1.quark.int)),
          While(Call(Attr(Var(Name(jdx), $type=1.quark.int), Name(__lt__),
            $type=1.quark.numeric.__lt__), Call(Attr(Var(Name(methods),
              $type=1.quark.List<3.quark.reflect.Method>), Name(size),
             $type=1.quark.List.size), $type=1.quark.int), $type=1.quark.bool),
           Block(
            Local(
             Declaration(Type(Name(Method)), Name(meth),
              Call(Attr(Var(Name(methods),
                $type=1.quark.List<3.quark.reflect.Method>), Name(__get__),
               $type=1.quark.List.__get__), Var(Name(jdx), $type=1.quark.int),
              $type=3.quark.reflect.Method), $type=3.quark.reflect.Method)),
            Local(
             Declaration(Type(Name(String)), Name(mname),
              Call(Attr(Var(Name(meth), $type=3.quark.reflect.Method),
                Name(getName), $type=3.quark.reflect.Method.getName),
              $type=1.quark.String), $type=1.quark.String)),
            If(Call(Attr(Var(Name(mname), $type=1.quark.String),
               Name(startsWith), $type=1.quark.String.startsWith),
              String("test", $type=1.quark.String), $type=1.quark.bool), Block(
              Local(
               Declaration(Type(Name(Test)), Name(test),
                Call(Type(Name(MethodTest)), Var(Name(klass),
                 $type=3.quark.reflect.Class), Var(Name(meth),
                 $type=3.quark.reflect.Method), $type=9.quark.test.MethodTest),
               $type=9.quark.test.Test)),
              If(Call(Attr(Var(Name(test), $type=9.quark.test.Test),
                 Name(match), $type=9.quark.test.Test.match),
                Var(Name(filters), $type=1.quark.List<1.quark.String>),
               $type=1.quark.bool), Block(
                ExprStmt(Call(Attr(Var(Name(tests),
                   $type=1.quark.List<9.quark.test.Test>), Name(add),
                  $type=1.quark.List.add), Var(Name(test),
                  $type=9.quark.test.Test), $type=1.quark.void))), Block(
                Assign(Var(Name(filtered), $type=1.quark.int),
                 Call(Attr(Var(Name(filtered), $type=1.quark.int),
                   Name(__add__), $type=1.quark.numeric.__add__), Number(1,
                  $type=1.quark.int), $type=1.quark.int)))))),
            Assign(Var(Name(jdx), $type=1.quark.int), Call(Attr(Var(Name(jdx),
               $type=1.quark.int), Name(__add__),
              $type=1.quark.numeric.__add__), Number(1, $type=1.quark.int),
             $type=1.quark.int)))))),
        Assign(Var(Name(idx), $type=1.quark.int), Call(Attr(Var(Name(idx),
           $type=1.quark.int), Name(__add__), $type=1.quark.numeric.__add__),
          Number(1, $type=1.quark.int), $type=1.quark.int)))))),

    Method(static=False, Type(Name(void)), Name(list), Block(
      Local(
       Declaration(Type(Name(int)), Name(idx), Number(0, $type=1.quark.int),
       $type=1.quark.int)),
      While(Call(Attr(Var(Name(idx), $type=1.quark.int), Name(__lt__),
        $type=1.quark.numeric.__lt__), Call(Attr(Var(Name(tests),
          $type=1.quark.List<9.quark.test.Test>), Name(size),
         $type=1.quark.List.size), $type=1.quark.int), $type=1.quark.bool),
       Block(
        Local(
         Declaration(Type(Name(Test)), Name(test), Call(Attr(Var(Name(tests),
            $type=1.quark.List<9.quark.test.Test>), Name(__get__),
           $type=1.quark.List.__get__), Var(Name(idx), $type=1.quark.int),
          $type=9.quark.test.Test), $type=9.quark.test.Test)),
        ExprStmt(Call(Var(Name(print), $type=0.quark.print),
          Attr(Var(Name(test), $type=9.quark.test.Test), Name(name),
          $type=1.quark.String), $type=1.quark.void)),
        Assign(Var(Name(idx), $type=1.quark.int), Call(Attr(Var(Name(idx),
           $type=1.quark.int), Name(__add__), $type=1.quark.numeric.__add__),
          Number(1, $type=1.quark.int), $type=1.quark.int)))))),

    Method(static=False, Type(Name(void)), Name(run), Block(
      ExprStmt(Call(Var(Name(print), $type=0.quark.print), Call(Var(Name(bold),
         $type=9.quark.test.bold),
         String("=============================== starting tests ===============================",
         $type=1.quark.String), $type=1.quark.String), $type=1.quark.void)),
      Local(
       Declaration(Type(Name(int)), Name(idx), Number(0, $type=1.quark.int),
       $type=1.quark.int)),
      Local(
       Declaration(Type(Name(int)), Name(failures), Number(0,
        $type=1.quark.int), $type=1.quark.int)),
      While(Call(Attr(Var(Name(idx), $type=1.quark.int), Name(__lt__),
        $type=1.quark.numeric.__lt__), Call(Attr(Var(Name(tests),
          $type=1.quark.List<9.quark.test.Test>), Name(size),
         $type=1.quark.List.size), $type=1.quark.int), $type=1.quark.bool),
       Block(
        Local(
         Declaration(Type(Name(Test)), Name(test), Call(Attr(Var(Name(tests),
            $type=1.quark.List<9.quark.test.Test>), Name(__get__),
           $type=1.quark.List.__get__), Var(Name(idx), $type=1.quark.int),
          $type=9.quark.test.Test), $type=9.quark.test.Test)),
        ExprStmt(Call(Attr(Var(Name(test), $type=9.quark.test.Test),
           Name(start), $type=9.quark.test.Test.start), $type=1.quark.void)),
        ExprStmt(Call(Attr(Var(Name(test), $type=9.quark.test.Test), Name(run),
          $type=9.quark.test.Test.run), $type=1.quark.void)),
        ExprStmt(Call(Attr(Var(Name(test), $type=9.quark.test.Test),
           Name(stop), $type=9.quark.test.Test.stop), $type=1.quark.void)),
        If(Call(Attr(Call(Attr(Attr(Var(Name(test), $type=9.quark.test.Test),
              Name(failures), $type=1.quark.List<1.quark.String>), Name(size),
            $type=1.quark.List.size), $type=1.quark.int), Name(__gt__),
          $type=1.quark.numeric.__gt__), Number(0, $type=1.quark.int),
         $type=1.quark.bool), Block(
          Assign(Var(Name(failures), $type=1.quark.int),
           Call(Attr(Var(Name(failures), $type=1.quark.int), Name(__add__),
            $type=1.quark.numeric.__add__), Number(1, $type=1.quark.int),
           $type=1.quark.int)))),
        Assign(Var(Name(idx), $type=1.quark.int), Call(Attr(Var(Name(idx),
           $type=1.quark.int), Name(__add__), $type=1.quark.numeric.__add__),
          Number(1, $type=1.quark.int), $type=1.quark.int)))),
      Local(
       Declaration(Type(Name(int)), Name(passed),
        Call(Attr(Call(Attr(Var(Name(tests),
            $type=1.quark.List<9.quark.test.Test>), Name(size),
           $type=1.quark.List.size), $type=1.quark.int), Name(__sub__),
         $type=1.quark.numeric.__sub__), Var(Name(failures),
         $type=1.quark.int), $type=1.quark.int), $type=1.quark.int)),
      ExprStmt(Call(Var(Name(print), $type=0.quark.print), Call(Var(Name(bold),
         $type=9.quark.test.bold),
         String("=============================== stopping tests ===============================",
         $type=1.quark.String), $type=1.quark.String), $type=1.quark.void)),
      Local(
       Declaration(Type(Name(String)), Name(result),
        Call(Attr(Call(Attr(Call(Attr(Call(Attr(Call(Attr(Call(Attr(Call(Attr(String("Total: ",
                      $type=1.quark.String), Name(__add__),
                     $type=1.quark.String.__add__),
                     Call(Attr(Call(Attr(Call(Attr(Var(Name(tests),
                           $type=1.quark.List<9.quark.test.Test>), Name(size),
                          $type=1.quark.List.size), $type=1.quark.int),
                         Name(__add__), $type=1.quark.numeric.__add__),
                        Var(Name(filtered), $type=1.quark.int),
                       $type=1.quark.int), Name(toString),
                      $type=1.quark.int.toString), $type=1.quark.String),
                    $type=1.quark.String), Name(__add__),
                   $type=1.quark.String.__add__), String(", Filtered: ",
                   $type=1.quark.String), $type=1.quark.String), Name(__add__),
                 $type=1.quark.String.__add__), Call(Attr(Var(Name(filtered),
                   $type=1.quark.int), Name(toString),
                  $type=1.quark.int.toString), $type=1.quark.String),
                $type=1.quark.String), Name(__add__),
               $type=1.quark.String.__add__), String(", Passed: ",
               $type=1.quark.String), $type=1.quark.String), Name(__add__),
             $type=1.quark.String.__add__), Call(Attr(Var(Name(passed),
               $type=1.quark.int), Name(toString), $type=1.quark.int.toString),
             $type=1.quark.String), $type=1.quark.String), Name(__add__),
           $type=1.quark.String.__add__), String(", Failed: ",
           $type=1.quark.String), $type=1.quark.String), Name(__add__),
         $type=1.quark.String.__add__), Call(Attr(Var(Name(failures),
           $type=1.quark.int), Name(toString), $type=1.quark.int.toString),
         $type=1.quark.String), $type=1.quark.String), $type=1.quark.String)),
      If(Call(Attr(Var(Name(failures), $type=1.quark.int), Name(__gt__),
        $type=1.quark.numeric.__gt__), Number(0, $type=1.quark.int),
       $type=1.quark.bool), Block(
        ExprStmt(Call(Var(Name(print), $type=0.quark.print),
          Call(Var(Name(red), $type=9.quark.test.red), Var(Name(result),
           $type=1.quark.String), $type=1.quark.String), $type=1.quark.void))),
       Block(
        ExprStmt(Call(Var(Name(print), $type=0.quark.print),
          Call(Var(Name(green), $type=9.quark.test.green), Var(Name(result),
           $type=1.quark.String), $type=1.quark.String),
         $type=1.quark.void)))))),

    Method(static=False, Type(Name(String)), Name(_getClass), Block(
      Return(String("quark.test.Harness", $type=1.quark.String)))),

    Method(static=False, Type(Name(Object)), Name(_getField),
     Param(Type(Name(String)), Name(name), $type=1.quark.String),
     Block(
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("pkg", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Return(Attr(Var(Name(self), $type=9.quark.test.Harness), Name(pkg),
         $type=1.quark.String)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("tests", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Return(Attr(Var(Name(self), $type=9.quark.test.Harness), Name(tests),
         $type=1.quark.List<9.quark.test.Test>)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("filtered", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Return(Attr(Var(Name(self), $type=9.quark.test.Harness),
          Name(filtered), $type=1.quark.int)))),
      Return(Null(null, $type=1.quark.Object)))),

    Method(static=False, Type(Name(void)), Name(_setField),
     Param(Type(Name(String)), Name(name), $type=1.quark.String),
     Param(Type(Name(Object)), Name(value), $type=1.quark.Object),
     Block(
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("pkg", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Assign(Attr(Var(Name(self), $type=9.quark.test.Harness), Name(pkg),
         $type=1.quark.String), Cast(Var(Name(value), $type=1.quark.Object),
         $type=1.quark.String)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("tests", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Assign(Attr(Var(Name(self), $type=9.quark.test.Harness), Name(tests),
         $type=1.quark.List<9.quark.test.Test>), Cast(Var(Name(value),
          $type=1.quark.Object), $type=1.quark.List<9.quark.test.Test>)))),
      If(Call(Attr(Var(Name(name), $type=1.quark.String), Name(__eq__),
        $type=1.quark.Object.__eq__), String("filtered", $type=1.quark.String),
       $type=1.quark.bool), Block(
        Assign(Attr(Var(Name(self), $type=9.quark.test.Harness),
          Name(filtered), $type=1.quark.int), Cast(Var(Name(value),
          $type=1.quark.Object), $type=1.quark.int)))))),
    Field(static=True, Type(Name(reflect), Name(Class)),
     Name(quark_List_quark_test_Test__ref), Attr(Attr(Var(Name(quark_md),
       $type=12.quark_md), Name(Root), $type=12.quark_md.Root),
      Name(quark_List_quark_test_Test__md), $type=3.quark.reflect.Class),
    $type=3.quark.reflect.Class),
    Field(static=True, Type(Name(reflect), Name(Class)),
     Name(quark_test_Harness_ref), Attr(Attr(Var(Name(quark_md),
       $type=12.quark_md), Name(Root), $type=12.quark_md.Root),
      Name(quark_test_Harness_md), $type=3.quark.reflect.Class),
    $type=3.quark.reflect.Class)),

   Function(Type(Name(void)), Name(run),
    Param(Type(Name(List), Type(Name(String))), Name(args),
    $type=1.quark.List<1.quark.String>),
    Block(
     Local(
      Declaration(Type(Name(String)), Name(pkg), Call(Attr(Var(Name(args),
         $type=1.quark.List<1.quark.String>), Name(__get__),
        $type=1.quark.List.__get__), Number(0, $type=1.quark.int),
       $type=1.quark.String), $type=1.quark.String)),
     Local(
      Declaration(Type(Name(List), Type(Name(String))), Name(filters), List(,
       $type=1.quark.List<1.quark.String>),
      $type=1.quark.List<1.quark.String>)),
     Local(
      Declaration(Type(Name(bool)), Name(list), Bool(false,
       $type=1.quark.bool), $type=1.quark.bool)),
     Local(
      Declaration(Type(Name(int)), Name(idx), Number(1, $type=1.quark.int),
      $type=1.quark.int)),
     While(Call(Attr(Var(Name(idx), $type=1.quark.int), Name(__lt__),
       $type=1.quark.numeric.__lt__), Call(Attr(Var(Name(args),
         $type=1.quark.List<1.quark.String>), Name(size),
        $type=1.quark.List.size), $type=1.quark.int), $type=1.quark.bool),
      Block(
       Local(
        Declaration(Type(Name(String)), Name(arg), Call(Attr(Var(Name(args),
           $type=1.quark.List<1.quark.String>), Name(__get__),
          $type=1.quark.List.__get__), Var(Name(idx), $type=1.quark.int),
         $type=1.quark.String), $type=1.quark.String)),
       If(Call(Attr(Var(Name(arg), $type=1.quark.String), Name(__eq__),
         $type=1.quark.Object.__eq__), String("-l", $type=1.quark.String),
        $type=1.quark.bool), Block(
         Assign(Var(Name(list), $type=1.quark.bool), Bool(true,
          $type=1.quark.bool))), Block(
         ExprStmt(Call(Attr(Var(Name(filters),
            $type=1.quark.List<1.quark.String>), Name(add),
           $type=1.quark.List.add), Var(Name(arg), $type=1.quark.String),
          $type=1.quark.void)))),
       Assign(Var(Name(idx), $type=1.quark.int), Call(Attr(Var(Name(idx),
          $type=1.quark.int), Name(__add__), $type=1.quark.numeric.__add__),
         Number(1, $type=1.quark.int), $type=1.quark.int)))),
     Local(
      Declaration(Type(Name(Harness)), Name(h), Call(Type(Name(Harness)),
        Var(Name(pkg), $type=1.quark.String), $type=9.quark.test.Harness),
      $type=9.quark.test.Harness)),
     ExprStmt(Call(Attr(Var(Name(h), $type=9.quark.test.Harness),
        Name(collect), $type=9.quark.test.Harness.collect), Var(Name(filters),
       $type=1.quark.List<1.quark.String>), $type=1.quark.void)),
     If(Var(Name(list), $type=1.quark.bool), Block(
       ExprStmt(Call(Attr(Var(Name(h), $type=9.quark.test.Harness), Name(list),
         $type=9.quark.test.Harness.list), $type=1.quark.void))), Block(
       ExprStmt(Call(Var(Name(print), $type=0.quark.print),
         Call(Var(Name(bold), $type=9.quark.test.bold),
          Call(Attr(String("Running: ", $type=1.quark.String), Name(__add__),
           $type=1.quark.String.__add__), Call(Attr(String(" ",
             $type=1.quark.String), Name(join), $type=1.quark.String.join),
            Var(Name(args), $type=1.quark.List<1.quark.String>),
           $type=1.quark.String), $type=1.quark.String), $type=1.quark.String),
        $type=1.quark.void)),
       ExprStmt(Call(Attr(Var(Name(h), $type=9.quark.test.Harness), Name(run),
         $type=9.quark.test.Harness.run), $type=1.quark.void))))))))
)